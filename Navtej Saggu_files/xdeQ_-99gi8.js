if (self.CavalryLogger) { CavalryLogger.start_js(["pBGyP"]); }

__d("VideoPlayerStreamSwitchReasons",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BANDWIDTH:"bandwidth",FORCED:"forced",PREFER_QUALITY_CLASS:"prefer_quality_class",USER:"user"};},null);
__d('TaggedTimeRanges',['sprintf'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$TaggedTimeRanges1=[];this.$TaggedTimeRanges2=0;this.$TaggedTimeRanges3=0;this.$TaggedTimeRanges4=i?i:function(j,k){return j===k;};}h.prototype.add=function(i,j,k){'use strict';if(j<i)return;if(j===i)return;if(this.$TaggedTimeRanges1.length===0){this.$TaggedTimeRanges1.push({start:i,end:j,tag:k});return;}var l=0,m=0;for(var n=0;n<this.$TaggedTimeRanges1.length;n++){if(i>=this.$TaggedTimeRanges1[n].start)l=n+1;if(j<=this.$TaggedTimeRanges1[n].end)m=n;if(j<this.$TaggedTimeRanges1[n].start)break;}this.$TaggedTimeRanges1.splice(l,m-l,{start:i,end:j,tag:k});this.$TaggedTimeRanges5(l);};h.prototype.$TaggedTimeRanges5=function(i){'use strict';var j=this.$TaggedTimeRanges1[i],k=null;if(i!==0)k=this.$TaggedTimeRanges1[i-1];if(k!==null)if(this.$TaggedTimeRanges4(k.tag,j.tag)){if(k.end>=j.start){this.$TaggedTimeRanges1.splice(i-1,2,{start:k.start,end:Math.max(j.end,k.end),tag:j.tag});i--;}}else{if(k.end>=j.start)this.$TaggedTimeRanges1.splice(i-1,1,{start:k.start,end:j.start,tag:k.tag});if(k.end>j.end)this.$TaggedTimeRanges1.splice(i+1,0,{start:j.end,end:k.end,tag:k.tag});}var l=null;if(i!==this.$TaggedTimeRanges1.length-1)l=this.$TaggedTimeRanges1[i+1];if(l)if(this.$TaggedTimeRanges4(l.tag,j.tag)){if(l.start<=j.end)this.$TaggedTimeRanges1.splice(i,2,{start:j.start,end:Math.max(l.end,j.end),tag:j.tag});}else if(l.start<=j.end)if(l.end<j.end){this.$TaggedTimeRanges1.splice(i,1,{start:j.start,end:l.start,tag:j.tag});this.$TaggedTimeRanges1.push({start:l.end,end:j.end,tag:j.tag});}else this.$TaggedTimeRanges1.splice(i+1,1,{start:j.end,end:l.end,tag:l.tag});};h.prototype.get=function(i){'use strict';var j=i>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,k=null;for(var l=j;l<this.$TaggedTimeRanges1.length;l++)if(this.$TaggedTimeRanges1[l].start<=i&&i<this.$TaggedTimeRanges1[l].end){k=l;break;}this.$TaggedTimeRanges2=k===null?0:k;this.$TaggedTimeRanges3=i;return k===null?null:this.$TaggedTimeRanges1[k].tag;};h.prototype.getLength=function(){'use strict';return this.$TaggedTimeRanges1.length;};f.exports=h;},null);
__d("Shaka",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};(function(i){var j,k=this;function l(em,fm){var gm=em.split("."),hm=k;gm[0] in hm||!hm.execScript||hm.execScript("var "+gm[0]);for(var im;gm.length&&(im=gm.shift());)gm.length||void 0===fm?hm[im]?hm=hm[im]:hm=hm[im]={}:hm[im]=fm;}function m(em,fm){function gm(){}gm.prototype=fm.prototype;em.Tb=fm.prototype;em.prototype=new gm();em.prototype.constructor=em;em.Sb=function(hm,im,jm){return fm.prototype[im].apply(hm,Array.prototype.slice.call(arguments,2));};}function n(){}function o(em){var fm=console[em];fm?fm.bind||(console[em]=function(){fm.apply(console,arguments);}):console[em]=function(){};}o("error");o("warn");o("info");o("log");o("debug");function p(em){t[em]={fa:s(),end:NaN};}function q(em){if(em=t[em])em.end=s();}function r(em){return (em=t[em])&&em.end?em.end-em.fa:NaN;}var s=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now,t={};function u(em,fm,gm,hm){this.id=em;this.bandwidth=fm||0;this.lang=gm||"unknown";this.streamInfoID=hm;this.active=false;}l("shaka.player.AudioTrack.compare",function(em,fm){return em.lang<fm.lang?-1:em.lang>fm.lang?1:em.bandwidth<fm.bandwidth?-1:em.bandwidth>fm.bandwidth?1:0;});function v(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null;}v.prototype.clone=function(){var em=new v();em.maxHeight=this.maxHeight;em.minHeight=this.minHeight;em.maxWidth=this.maxWidth;em.maxBandwidth=this.maxBandwidth;em.minBandwidth=this.minBandwidth;return em;};function w(){this.fontSize="100%";this.fontColor=z;this.fontOpacity=ba;this.backgroundColor=aa;this.backgroundOpacity=ba;this.fontEdge=ca;}l("shaka.player.TextStyle",w);function x(em){var fm=[];fm.push("font-size: "+em.fontSize);fm.push("color: "+y(em.fontColor,em.fontOpacity));fm.push("background-color: "+y(em.backgroundColor,em.backgroundOpacity));for(var gm=[],hm=0;hm<em.fontEdge.length;++hm){var im=em.fontEdge[hm].slice(3,6);gm.push(y(em.fontEdge[hm].slice(0,3),em.fontOpacity)+" "+im.join("px ")+"px");}fm.push("text-shadow: "+gm.join(","));return fm.join("; ");}function y(em,fm){return "rgba("+em.concat(fm).join(",")+")";}var z=[255,255,255],aa=[0,0,0];w.StandardColors={WHITE:z,BLACK:aa,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var ba=1;w.StandardOpacities={OPAQUE:ba,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var ca=[];w.EdgeStyles={NONE:ca,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function da(em,fm){this.id=em;this.lang=fm||"unknown";this.enabled=this.active=false;}l("shaka.player.TextTrack.compare",function(em,fm){return em.lang<fm.lang?-1:em.lang>fm.lang?1:0;});function ea(em,fm,gm,hm,im,jm,km){this.id=em;this.bandwidth=fm||0;this.width=gm||0;this.height=hm||0;this.streamInfoID=im;this.fbQualityLabel=jm;this.fbQualityClass=km;this.active=false;}function fa(em,fm){var gm=em.width*em.height,hm=fm.width*fm.height;return gm<hm?-1:gm>hm?1:em.bandwidth<fm.bandwidth?-1:em.bandwidth>fm.bandwidth?1:0;}l("shaka.player.VideoTrack.compare",fa);function ga(){var em="CustomEvent" in i;if(em)try{new CustomEvent("");}catch(fm){em=false;}em||(i.CustomEvent=ha);}l("shaka.polyfill.CustomEvent.install",ga);function ha(em,fm){var gm=document.createEvent("CustomEvent"),hm=fm||{bubbles:false,cancelable:false,detail:null};gm.initCustomEvent(em,!!hm.bubbles,!!hm.cancelable,hm.detail);return gm;}function ia(){var em=Element.prototype;em.requestFullscreen=em.requestFullscreen||em.mozRequestFullScreen||em.msRequestFullscreen||em.webkitRequestFullscreen;em=Document.prototype;em.exitFullscreen=em.exitFullscreen||em.mozCancelFullScreen||em.msExitFullscreen||em.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",ja);document.addEventListener("webkitfullscreenerror",ja);document.addEventListener("mozfullscreenchange",ja);document.addEventListener("mozfullscreenerror",ja);document.addEventListener("MSFullscreenChange",ja);document.addEventListener("MSFullscreenError",ja);}l("shaka.polyfill.Fullscreen.install",ia);function ja(em){var fm=em.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),fm=new Event(fm,em);em.target.dispatchEvent(fm);}function ka(){return Promise.reject(Error("The key system specified is not supported."));}function la(em){return null==em?Promise.resolve():Promise.reject(Error("MediaKeys not supported."));}function ma(){throw new TypeError("Illegal constructor.");}ma.prototype.createSession=function(){};ma.prototype.setServerCertificate=function(){};function na(){throw new TypeError("Illegal constructor.");}na.prototype.getConfiguration=function(){};na.prototype.createMediaKeys=function(){};function oa(em){this.c=[];this.b=[];this.Z=pa;if(em)try{em(this.X.bind(this),this.a.bind(this));}catch(fm){this.a(fm);}}var pa=0;function qa(){i.Promise||(i.Promise=oa,i.Promise.resolve=ra,i.Promise.reject=sa,i.Promise.all=ta,i.Promise.race=ua,i.setImmediate?(xa=function(em){return i.setImmediate(em);},ya=function(em){return i.clearImmediate(em);}):(xa=function(em){return i.setTimeout(em,0);},ya=function(em){return i.clearTimeout(em);}));}l("shaka.polyfill.Promise.install",qa);function ra(em){var fm=new oa();fm.X(em);return fm;}function sa(em){var fm=new oa();fm.a(em);return fm;}function ta(em){function fm(lm,mm,nm){lm.Z==pa&&(im[mm]=nm,hm++,hm==im.length&&lm.X(im));}var gm=new oa();if(!em.length)return gm.X([]),gm;for(var hm=0,im=Array(em.length),jm=gm.a.bind(gm),km=0;km<em.length;++km)em[km]&&em[km].then?em[km].then(fm.bind(null,gm,km),jm):fm(gm,km,em[km]);return gm;}function ua(em){for(var fm=new oa(),gm=fm.X.bind(fm),hm=fm.a.bind(fm),im=0;im<em.length;++im)em[im]&&em[im].then?em[im].then(gm,hm):gm(em[im]);return fm;}oa.prototype.then=function(em,fm){var gm=new oa();switch(this.Z){case 1:va(this,gm,em);break;case 2:va(this,gm,fm);break;case pa:this.c.push({Ga:gm,ya:em}),this.b.push({Ga:gm,ya:fm});}return gm;};oa.prototype.then=oa.prototype.then;oa.prototype.catch=function(em){return this.then(void 0,em);};oa.prototype["catch"]=oa.prototype.catch;oa.prototype.X=function(em){if(this.Z==pa){this.ua=em;this.Z=1;for(em=0;em<this.c.length;++em)va(this,this.c[em].Ga,this.c[em].ya);this.c=[];this.b=[];}};oa.prototype.a=function(em){if(this.Z==pa){this.ua=em;this.Z=2;for(em=0;em<this.b.length;++em)va(this,this.b[em].Ga,this.b[em].ya);this.c=[];this.b=[];}};function va(em,fm,gm){ab.push(function(){if(gm&&"function"==typeof gm){try{var im=gm(this.ua);}catch(hm){fm.a(hm);return;}im instanceof oa?im==fm?fm.a(new TypeError("Chaining cycle detected")):im.then(fm.X.bind(fm),fm.a.bind(fm)):fm.X(im);}else 1==this.Z?fm.X(this.ua):fm.a(this.ua);}.bind(em));null==za&&(za=xa(wa));}function wa(){for(;ab.length;){null!=za&&(ya(za),za=null);var em=ab;ab=[];for(var fm=0;fm<em.length;++fm)em[fm]();}}function xa(){return 0;}function ya(){}var za=null,ab=[];function bb(){var em=HTMLVideoElement.prototype;!em.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in em&&(em.getVideoPlaybackQuality=cb);}l("shaka.polyfill.VideoPlaybackQuality.install",bb);function cb(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function db(em,fm){for(var gm=[],hm=0;hm<em.length;++hm){for(var im=false,jm=0;jm<gm.length&&!(im=fm?fm(em[hm],gm[jm]):em[hm]===gm[jm]);++jm);im||gm.push(em[hm]);}return gm;}function eb(){return Date.now()+fb;}var fb=0;function gb(em){this.b=em;this.c=0==hb;this.a=0;}var hb=1;function ib(em){return em.a<em.b.byteLength;}function jb(em){var fm=em.b.getUint8(em.a);em.a+=1;return fm;}function kb(em){var fm=em.b.getUint32(em.a,em.c);em.a+=4;return fm;}function lb(em){var fm,gm;em.c?(fm=em.b.getUint32(em.a,true),gm=em.b.getUint32(em.a+4,true)):(gm=em.b.getUint32(em.a,false),fm=em.b.getUint32(em.a+4,false));if(2097151<gm)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");em.a+=8;return gm*Math.pow(2,32)+fm;}function mb(em){if(em.a+16>em.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var fm=new Uint8Array(em.b.buffer,em.a,16);em.a+=16;return fm;}function nb(em,fm){if(em.a+fm>em.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");em.a+=fm;}function ob(em){this.b=em;this.a=new gb(em);pb||(pb=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var pb;function qb(em){var fm;fm=rb(em);if(7<fm.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var gm=0,hm=0;hm<fm.length;hm++)gm=256*gm+fm[hm];fm=gm;gm=rb(em);em:{for(hm=0;hm<pb.length;hm++)if(ud(gm,pb[hm])){hm=true;break em;}hm=false;};if(hm){gm=em.b.byteLength-em.a.a;}else{if(8==gm.length&&gm[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var hm=gm[0]&(1<<8-gm.length)-1,im=1;im<gm.length;im++)hm=256*hm+gm[im];gm=hm;}gm=em.a.a+gm<=em.b.byteLength?gm:em.b.byteLength-em.a.a;hm=new DataView(em.b.buffer,em.b.byteOffset+em.a.a,gm);nb(em.a,gm);return new sb(fm,hm);}function rb(em){var fm=jb(em.a),gm;for(gm=1;8>=gm&&!(fm&1<<8-gm);gm++);if(8<gm)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var hm=new Uint8Array(gm);hm[0]=fm;for(fm=1;fm<gm;fm++)hm[fm]=jb(em.a);return hm;}function sb(em,fm){this.id=em;this.a=fm;}function tb(em){if(8<em.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==em.a.byteLength&&em.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var fm=0,gm=0;gm<em.a.byteLength;gm++)var hm=em.a.getUint8(gm),fm=256*fm+hm;return fm;}var ub={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function vb(em){this.c=Math.exp(Math.log(.5)/em);this.a=this.b=0;}vb.prototype.sample=function(em,fm){var gm=Math.pow(this.c,em);this.b=fm*(1-gm)+gm*this.b;this.a+=em;};function wb(em){return em.b/(1-Math.pow(em.c,em.a));}function xb(em){var fm=new CustomEvent(em.type,{detail:em.detail,bubbles:!!em.bubbles}),gm;for(gm in em)gm in fm||(fm[gm]=em[gm]);return fm;}function yb(em){return new CustomEvent("error",{detail:em,bubbles:true});}function zb(em,fm,gm){cc(fm);cc(gm);return gm==fm||em>=ac&&gm==fm.split("-")[0]||em>=bc&&gm.split("-")[0]==fm.split("-")[0]?true:false;}var ac=1,bc=2;function cc(em){em=em.toLowerCase().split("-");var fm=dc[em[0]];fm&&(em[0]=fm);return em.join("-");}var dc={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function ec(em){return Object.keys(em).map(function(fm){return em[fm];});}function fc(em,fm){return ic(em,fm,"boolean");}function gc(em,fm,gm){em=ic(em,fm,"number");if(null==em)return null;if(isNaN(em)||em==Number.NEGATIVE_INFINITY||em==Number.POSITIVE_INFINITY)throw new RangeError("'"+fm+"' must be finite.");if(null!=gm&&em<gm)throw new RangeError("'"+fm+"' must be >= "+gm);return em;}function hc(em,fm){return ic(em,fm,"string");}function ic(em,fm,gm){em=em[fm];if(null==em)return null;if(typeof em!=gm)throw new TypeError("'"+fm+"' must be a "+gm+".");return em;}function jc(em,fm,gm){em=em[fm];if(null==em)return null;if(!(em instanceof gm))throw new TypeError("'"+fm+"' must be an instance of "+gm.name+".");return em;}function kc(){this.a={};}kc.prototype.push=function(em,fm){this.a.hasOwnProperty(em)?this.a[em].push(fm):this.a[em]=[fm];};kc.prototype.set=function(em,fm){this.a[em]=fm;};kc.prototype.get=function(em){return (em=this.a[em])?em.slice():null;};function lc(em){var fm=[],gm;for(gm in em.a)fm.push.apply(fm,em.a[gm]);return fm;}function mc(em,fm,gm){if(em=em.a[fm])for(fm=0;fm<em.length;++fm)em[fm]==gm&&(em.splice(fm,1),--fm);}function nc(em){var fm=[],gm;for(gm in em.a)fm.push(gm);return fm;}function oc(){this.a=new kc();}oc.prototype.destroy=function(){qc(this);this.a=null;};function pc(em,fm,gm,hm){fm=new rc(fm,gm,hm);em.a.push(gm,fm);}oc.prototype.ra=function(em,fm){for(var gm=this.a.get(fm)||[],hm=0;hm<gm.length;++hm){var im=gm[hm];im.target==em&&(im.ra(),mc(this.a,fm,im));}};function qc(em){for(var fm=lc(em.a),gm=0;gm<fm.length;++gm)fm[gm].ra();em.a.a={};}function rc(em,fm,gm){this.target=em;this.type=fm;this.a=gm;this.target.addEventListener(fm,gm,false);}rc.prototype.ra=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function sc(em){this.va=new kc();this.S=em;}l("shaka.util.FakeEventTarget",sc);sc.prototype.addEventListener=function(em,fm,gm){gm||this.va.push(em,fm);};sc.prototype.removeEventListener=function(em,fm,gm){gm||mc(this.va,em,fm);};sc.prototype.dispatchEvent=function(em){em.hasOwnProperty("srcElement")||(delete em.srcElement,Object.defineProperty(em,"srcElement",{get:function(){return null;}}));if(em.hasOwnProperty("target")){em.target=this;}else{delete em.target;var fm=this;Object.defineProperty(em,"target",{get:function(){return fm;},set:function(hm){fm=hm;}});}if(em.hasOwnProperty("currentTarget")){em.currentTarget=null;}else{delete em.currentTarget;var gm=null;Object.defineProperty(em,"currentTarget",{get:function(){return gm;},set:function(hm){gm=hm;}});}return tc(this,em);};function tc(em,fm){fm.currentTarget=em;for(var gm=em.va.get(fm.type)||[],hm=0;hm<gm.length;++hm){var im=gm[hm];try{im.handleEvent?im.handleEvent(fm):im.call(em,fm);}catch(jm){}}em.S&&fm.bubbles&&tc(em.S,fm);return fm.defaultPrevented;}function uc(em){sc.call(this,null);this.a=new vb(3);this.g=new vb(10);this.h=em||500000;this.f=0;}m(uc,sc);l("shaka.util.EWMABandwidthEstimator",uc);uc.prototype.sample=function(em,fm){if(!(65536>fm)){em=Math.max(em,50);var gm=8000*fm/em,hm=em/1000;this.a.sample(hm,gm);this.g.sample(hm,gm);this.dispatchEvent(xb({type:"bandwidth"}));this.f=Date.now();}};uc.prototype.getBandwidth=function(){return .5>this.a.a?this.h:Math.min(wb(this.a),wb(this.g));};uc.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};uc.prototype.supportsCaching=function(){return false;};function vc(em,fm,gm){uc.call(this,gm);this.c=em||0;this.b=void 0===fm?Infinity:fm;}m(vc,uc);l("shaka.util.EWMACacheBandwidthEstimator",vc);vc.prototype.sample=function(em,fm){em<=this.c&&8000*fm/em>this.b||uc.prototype.sample.call(this,em,fm);};vc.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function wc(){uc.call(this);}m(wc,uc);l("shaka.util.EWMASignedURLBandwidthEstimator",wc);wc.prototype.supportsCaching=function(){return true;};function xc(){var em,fm,gm=new Promise(function(hm,im){em=hm;fm=im;});gm.resolve=em;gm.reject=fm;gm.destroy=xc.prototype.destroy;return gm;}xc.prototype.destroy=function(){this.catch(function(){});var em=Error("Destroyed!");em.type="destroy";this.reject(em);};function yc(em){em.split("").reduce(function(fm,gm,hm){return fm+(hm&&0==hm%4?" "+gm:gm);});}function zc(){this.g=new xc();this.f=false;this.a=null;this.b=[];this.c=null;}function ad(em,fm){if(em.f)throw Error("Cannot append to a running task!");em.b.push(fm);}zc.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=true;this.b.unshift(function(){});bd(this,void 0);};zc.prototype.end=function(){this.b.splice(1);};function bd(em,fm){var gm=em.b[0](fm),hm;gm?(hm=gm[0],em.c=gm[1]):(hm=Promise.resolve(),em.c=null);hm.then(dd(em,function(im){this.a?(this.b=[],this.c=null,cd(this)):(this.b.shift(),this.b.length?bd(this,im):(this.g.resolve(im),this.c=null));})).catch(dd(em,function(im){this.b=[];this.c=null;this.a?cd(this):this.g.reject(im);}));}function cd(em){var fm=Error("Task aborted.");fm.type="aborted";em.g.reject(fm);i.setTimeout(function(){this.a.resolve();this.a=null;}.bind(em),5);}function dd(em,fm){return fm.bind(em);}function ed(em,fm,gm){MediaSource.isTypeSupported(fm);fm=em.addSourceBuffer(fm);this.h=em;this.c=fm;this.l=gm;this.i=new oc();this.v=null;this.b=[];this.s=0;this.f=this.a=null;this.m=0;pc(this.i,this.c,"updateend",this.A.bind(this));}var fd=1/60;ed.prototype.destroy=function(){ld(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.i.destroy();this.h=this.c=this.i=null;};function gd(em,fm){for(var gm=em.c.buffered,hm=0;hm<gm.length;++hm){var im=gm.start(hm)-fd,jm=gm.end(hm)+fd;if(fm>=im&&fm<=jm)return gm.end(hm)-fm;}return 0;}function hd(em,fm,gm){fm=fm.a?fm.a-fm.b:1;var hm=new bh();hm.a=3;hm.i=1000*fm;hm.c=1000*em.m;hm.m=em.v;hm.j=gm;return hm;}function id(em,fm,gm,hm,im){if(em.a)return em=Error("Cannot fetch ("+em.j+"): previous operation not complete."),em.type="stream",Promise.reject(em);em.a=new zc();gm!=em.c.timestampOffset&&(em.c.timestampOffset=gm);gm=hd(em,fm,im);var jm=lh(fm.url,gm,em.l),km=ih.prototype.f.bind(fm.url),lm=0;hm&&ad(em.a,function(){return [hm.then(function(om){om.ha>lm&&(lm=om.ha);return od(this,om);}.bind(this)),this.g.bind(this)];}.bind(em));ad(em.a,dd(em,function(){return [jm.then(function(om){om.ha>lm&&(lm=om.ha);this.l.getBandwidth();return od(this,om);}.bind(this)),function(){km();this.g();}.bind(this)];}));var mm=0==em.c.buffered.length&&0==em.b.length,nm=null;ad(em.a,function(){if(0==this.c.buffered.length){var om=Error("Failed to buffer segment ("+this.j+").");om.type="stream";return [Promise.reject(om)];}mm&&(om=fm.b,nm=this.c.buffered.start(0)-om);om=xh(this.b,fm.b);0<=om?this.b.splice(om+1,0,fm):this.b.push(fm);}.bind(em));return nd(em).then(function(){return Promise.resolve({W:nm,nb:lm});}.bind(em));}function jd(em){if(em.a)return em=Error("Cannot clear ("+em.j+"): previous operation not complete."),em.type="stream",Promise.reject(em);em.a=new zc();ad(em.a,function(){var fm;fm:if(0==this.c.buffered.length){fm=Promise.resolve();}else{try{this.c.remove(0,this.h.duration);}catch(gm){fm=Promise.reject(gm);break fm;}this.b=[];fm=this.f=new xc();};return [fm,this.g.bind(this)];}.bind(em));return nd(em);}function kd(em,fm){if(em.a){var gm=Error("Cannot clearAfter ("+em.j+"): previous operation not complete.");gm.type="stream";return Promise.reject(gm);}em.a=new zc();ad(em.a,function(){return [pd(this,fm),this.g.bind(this)];}.bind(em));return nd(em);}function ld(em){em.a?(em=em.a,em.a?em=em.a:em.f?(em.c&&em.c(),em.a=new xc(),em=em.a):(em.f=true,em=Promise.resolve())):em=Promise.resolve();return em;}function md(em,fm){for(var gm=em.c.buffered,hm=fm,im=0;im<gm.length;im++)if(fm<=gm.start(im)){hm=gm.start(im);break;}return hm;}function nd(em){em.a.start();return em.a.g.then(dd(em,function(){this.a=null;})).catch(dd(em,function(fm){this.a=null;return Promise.reject(fm);}));}function od(em,fm){try{em.c.appendBuffer(fm);}catch(gm){return Promise.reject(gm);}em.f=new xc();return em.f;}function pd(em,fm){if(0==em.c.buffered.length)return Promise.resolve();var gm=xh(em.b,fm);if(-1==gm||gm==em.b.length-1)return Promise.resolve();try{em.c.remove(em.b[gm+1].b,em.h.duration);}catch(hm){return Promise.reject(hm);}em.b=em.b.slice(0,gm+1);em.f=new xc();return em.f;}ed.prototype.g=function(){this.f&&"open"==this.h.readyState&&this.c.abort();};ed.prototype.A=function(){this.f&&(this.f.resolve(),this.f=null);};function qd(em){return String.fromCharCode.apply(null,em);}l("shaka.util.Uint8ArrayUtils.toString",qd);function rd(em){for(var fm=new Uint8Array(em.length),gm=0;gm<em.length;++gm)fm[gm]=em.charCodeAt(gm);return fm;}l("shaka.util.Uint8ArrayUtils.fromString",rd);l("shaka.util.Uint8ArrayUtils.toBase64",function(em,fm){var gm=void 0==fm?true:fm,hm=i.btoa(qd(em)).replace(/\+/g,"-").replace(/\//g,"_");return gm?hm:hm.replace(/=*$/,"");});function sd(em){return rd(i.atob(em.replace(/-/g,"+").replace(/_/g,"/")));}l("shaka.util.Uint8ArrayUtils.fromBase64",sd);l("shaka.util.Uint8ArrayUtils.fromHex",function(em){for(var fm=new Uint8Array(em.length/2),gm=0;gm<em.length;gm+=2)fm[gm/2]=i.parseInt(em.substr(gm,2),16);return fm;});function td(em){for(var fm="",gm=0;gm<em.length;++gm){var hm=em[gm].toString(16);1==hm.length&&(hm="0"+hm);fm+=hm;}return fm;}l("shaka.util.Uint8ArrayUtils.toHex",td);function ud(em,fm){if(!em&&!fm)return true;if(!em||!fm||em.length!=fm.length)return false;for(var gm=0;gm<em.length;++gm)if(em[gm]!=fm[gm])return false;return true;}function vd(){this.h=this.a="";this.l=false;this.s=this.m=null;this.i=this.g=false;this.j=this.f="";this.c=null;this.b=[];}function wd(em,fm){var gm=new vd();gm.a=em.a;gm.h=em.h;gm.l=em.l;gm.m=em.m;gm.s=em.s;gm.g=em.g;gm.i=em.i;gm.f=em.f;gm.j=em.j;gm.c=em.c?new Uint8Array(em.c.buffer):null;xd(gm,em.b);xd(gm,fm.b);return gm;}function xd(em,fm){var gm=em.b.concat(fm.map(function(hm){return {initData:new Uint8Array(hm.initData.buffer),initDataType:hm.initDataType};}));em.b=db(gm,yd);}function yd(em,fm){return em.initDataType==fm.initDataType&&ud(em.initData,fm.initData);}function zd(em,fm,gm,hm){this.a=[];hm&&this.a.push(hm);}l("shaka.player.DrmSchemeInfo",zd);zd.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1};zd.PersistentState={OPTIONAL:0,REQUIRED:1};zd.createUnencrypted=function(){return new zd(0,0,0,null);};function ae(em,fm){try{var hm=new ce(em,fm);return Promise.resolve(hm);}catch(gm){return Promise.reject(gm);}}function be(em){var fm=this.mediaKeys;fm&&fm!=em&&ee(fm,null);delete this.mediaKeys;(this.mediaKeys=em)&&ee(em,this);return Promise.resolve();}function ce(em,fm){this.a=this.keySystem=em;var gm=true;"org.w3.clearkey"==em&&(this.a="webkit-org.w3.clearkey",gm=false);var hm=false,im;im=document.getElementsByTagName("video");im=im.length?im[0]:document.createElement("video");for(var jm=0;jm<fm.length;++jm){var km=fm[jm],lm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:km.initDataTypes,sessionTypes:["temporary"]},mm=false;if(km.audioCapabilities)for(var nm=0;nm<km.audioCapabilities.length;++nm){var om=km.audioCapabilities[nm];om.contentType&&(mm=true,im.canPlayType(om.contentType.split(";")[0],this.a)&&(lm.audioCapabilities.push(om),hm=true));}if(km.videoCapabilities)for(nm=0;nm<km.videoCapabilities.length;++nm)om=km.videoCapabilities[nm],om.contentType&&(mm=true,im.canPlayType(om.contentType,this.a)&&(lm.videoCapabilities.push(om),hm=true));mm||(hm=im.canPlayType("video/mp4",this.a)||im.canPlayType("video/webm",this.a));"required"==km.persistentState&&(gm?(lm.persistentState="required",lm.sessionTypes=["persistent-license"]):hm=false);if(hm){this.b=lm;return;}}gm="Unsupported keySystem";if("org.w3.clearkey"==em||"com.widevine.alpha"==em)gm="None of the requested configurations were supported.";gm=Error(gm);gm.name="NotSupportedError";gm.code=DOMException.NOT_SUPPORTED_ERR;throw gm;}ce.prototype.createMediaKeys=function(){var em=new de(this.a);return Promise.resolve(em);};ce.prototype.getConfiguration=function(){return this.b;};function de(em){this.g=em;this.b=null;this.a=new oc();this.c=[];this.f={};}function ee(em,fm){em.b=fm;qc(em.a);fm&&(pc(em.a,fm,"webkitneedkey",em.Jb.bind(em)),pc(em.a,fm,"webkitkeymessage",em.Ib.bind(em)),pc(em.a,fm,"webkitkeyadded",em.Gb.bind(em)),pc(em.a,fm,"webkitkeyerror",em.Hb.bind(em)));}j=de.prototype;j.createSession=function(em){var fm=em||"temporary";if("temporary"!=fm&&"persistent-license"!=fm)throw new TypeError("Session type "+em+" is unsupported on this platform.");em=this.b||document.createElement("video");em.src||(em.src="about:blank");fm=new ge(em,this.g,fm);this.c.push(fm);return fm;};j.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};j.Jb=function(em){em=xb({type:"encrypted",initDataType:"webm",initData:em.initData});this.b.dispatchEvent(em);};j.Ib=function(em){var fm=fe(this,em.sessionId);fm&&(em=xb({type:"message",messageType:void 0==fm.keyStatuses.Da()?"licenserequest":"licenserenewal",message:em.message}),fm.b&&(fm.b.resolve(),fm.b=null),fm.dispatchEvent(em));};j.Gb=function(em){if(em=fe(this,em.sessionId))ie(em,"usable"),em.a&&em.a.resolve(),em.a=null;};j.Hb=function(em){var fm=fe(this,em.sessionId);if(fm){var gm=Error("EME v0.1b key error");gm.errorCode=em.errorCode;gm.errorCode.systemCode=em.systemCode;!em.sessionId&&fm.b?(gm.method="generateRequest",45==em.systemCode&&(gm.message="Unsupported session type."),fm.b.reject(gm),fm.b=null):em.sessionId&&fm.a?(gm.method="update",fm.a.reject(gm),fm.a=null):(gm=em.systemCode,em.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?ie(fm,"output-restricted"):1==gm?ie(fm,"expired"):ie(fm,"internal-error"));}};function fe(em,fm){var gm=em.f[fm];return gm?gm:(gm=em.c.shift())?(gm.sessionId=fm,em.f[fm]=gm):null;}function ge(em,fm,gm){sc.call(this,null);this.f=em;this.h=false;this.a=this.b=null;this.c=fm;this.g=gm;this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new je();}m(ge,sc);function he(em,fm,gm){if(em.h)return Promise.reject(Error("The session is already initialized."));em.h=true;var hm;try{if("persistent-license"==em.g){if(gm){hm=rd("LOAD_SESSION|"+gm);}else{var jm=new Uint8Array(fm);hm=rd("PERSISTENT|"+qd(jm));}}else hm=new Uint8Array(fm);}catch(im){return Promise.reject(im);}em.b=new xc();try{em.f.webkitGenerateKeyRequest(em.c,hm);}catch(km){if("InvalidStateError"!=km.name)return em.b=null,Promise.reject(km);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,hm);}catch(lm){this.b.reject(lm),this.b=null;}}.bind(em),10);}return em.b;}j=ge.prototype;j.La=function(em,fm){if(this.a){this.a.then(this.La.bind(this,em,fm)).catch(this.La.bind(this,em,fm));}else{this.a=em;var gm,hm;"webkit-org.w3.clearkey"==this.c?(gm=qd(new Uint8Array(fm)),hm=JSON.parse(gm),"oct"!=hm.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),gm=sd(hm.keys[0].k),hm=sd(hm.keys[0].kid)):(gm=new Uint8Array(fm),hm=null);try{this.f.webkitAddKey(this.c,gm,hm,this.sessionId);}catch(im){this.a.reject(im),this.a=null;}}};function ie(em,fm){em.keyStatuses.Ia(fm);var gm=xb({type:"keystatuseschange"});em.dispatchEvent(gm);}j.generateRequest=function(em,fm){return he(this,fm,null);};j.load=function(em){return "persistent-license"==this.g?he(this,null,em):Promise.reject(Error("Not a persistent session."));};j.update=function(em){var fm=new xc();this.La(fm,em);return fm;};j.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};j.remove=function(){return "persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();};function je(){this.size=0;this.a=void 0;}var ke;j=je.prototype;j.Ia=function(em){this.size=void 0==em?0:1;this.a=em;};j.Da=function(){return this.a;};j.forEach=function(em){this.a&&em(ke,this.a);};j.get=function(em){if(this.has(em))return this.a;};j.has=function(em){var fm=ke;return this.a&&ud(new Uint8Array(em),new Uint8Array(fm))?true:false;};function le(em){this.systemIds=[];this.cencKeyIds=[];this.a=[];em=new gb(new DataView(em.buffer));try{for(;ib(em);){var gm=em.a,hm=kb(em),im=kb(em);1==hm?hm=lb(em):0==hm&&(hm=em.b.byteLength-gm);if(1886614376!=im){nb(em,hm-(em.a-gm));}else{var jm=jb(em);if(1<jm){nb(em,hm-(em.a-gm));}else{nb(em,3);var km=td(mb(em)),lm=[];if(0<jm)for(var mm=kb(em),nm=0;nm<mm;++nm){var om=td(mb(em));lm.push(om);}var pm=kb(em);nb(em,pm);this.cencKeyIds.push.apply(this.cencKeyIds,lm);this.systemIds.push(km);this.a.push({start:gm,end:em.a-1});em.a!=gm+hm&&nb(em,hm-(em.a-gm));}}}}catch(fm){}}function me(em,fm){try{var hm=new ne(em,fm);return Promise.resolve(hm);}catch(gm){return Promise.reject(gm);}}function ne(em,fm){this.keySystem=em;for(var gm=false,hm=0;hm<fm.length;++hm){var im=fm[hm],jm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:im.initDataTypes,sessionTypes:["temporary"]},km=false;if(im.audioCapabilities)for(var lm=0;lm<im.audioCapabilities.length;++lm){var mm=im.audioCapabilities[lm];if(mm.contentType){var km=true,nm=mm.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,nm)&&(jm.audioCapabilities.push(mm),gm=true);}}if(im.videoCapabilities)for(lm=0;lm<im.videoCapabilities.length;++lm)mm=im.videoCapabilities[lm],mm.contentType&&(km=true,nm=mm.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,nm)&&(jm.videoCapabilities.push(mm),gm=true));km||(gm=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==im.persistentState&&(jm.persistentState="required",jm.sessionTypes=["persistent-license"]);if(gm){this.a=jm;return;}}gm=Error("Unsupported keySystem");gm.name="NotSupportedError";gm.code=DOMException.NOT_SUPPORTED_ERR;throw gm;}ne.prototype.createMediaKeys=function(){var em=new pe(this.keySystem);return Promise.resolve(em);};ne.prototype.getConfiguration=function(){return this.a;};function oe(em){var fm=this.mediaKeys;fm&&fm!=em&&qe(fm,null);delete this.mediaKeys;return (this.mediaKeys=em)?qe(em,this):Promise.resolve();}function pe(em){this.a=new MSMediaKeys(em);this.b=new oc();}pe.prototype.createSession=function(em){if("temporary"!=(em||"temporary"))throw new TypeError("Session type "+em+" is unsupported on this platform.");return new re(this.a);};pe.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};function qe(em,fm){function gm(){fm.msSetMediaKeys(hm.a);fm.removeEventListener("loadedmetadata",gm);}qc(em.b);if(!fm)return Promise.resolve();pc(em.b,fm,"msneedkey",se);var hm=em;try{return 1<=fm.readyState?fm.msSetMediaKeys(em.a):fm.addEventListener("loadedmetadata",gm),Promise.resolve();}catch(im){return Promise.reject(im);}}function re(em){sc.call(this,null);this.c=null;this.g=em;this.b=this.a=null;this.f=new oc();this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new ve();}m(re,sc);j=re.prototype;j.generateRequest=function(em,fm){this.a=new xc();try{this.c=this.g.createSession("video/mp4",new Uint8Array(fm),null),pc(this.f,this.c,"mskeymessage",this.yb.bind(this)),pc(this.f,this.c,"mskeyadded",this.wb.bind(this)),pc(this.f,this.c,"mskeyerror",this.xb.bind(this)),ue(this,"status-pending");}catch(gm){this.a.reject(gm);}return this.a;};j.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"));};j.update=function(em){this.b=new xc();try{this.c.update(new Uint8Array(em));}catch(fm){this.b.reject(fm);}return this.b;};j.close=function(){try{this.c.close(),this.closed.resolve(),qc(this.f);}catch(em){this.closed.reject(em);}return this.closed;};j.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"));};function se(em){var fm=em.initData;if(fm){var gm=new le(fm);if(1>=gm.a.length){em=fm;}else{var hm=[];for(em=0;em<gm.a.length;em++)hm.push(fm.subarray(gm.a[em].start,gm.a[em].end+1));fm=db(hm,te);for(em=gm=0;em<fm.length;em++)gm+=fm[em].length;gm=new Uint8Array(gm);for(em=hm=0;em<fm.length;em++)gm.set(fm[em],hm),hm+=fm[em].length;em=gm;}}else em=fm;em=xb({type:"encrypted",initDataType:"cenc",initData:em});this.dispatchEvent(em);}function te(em,fm){return ud(em,fm);}j.yb=function(em){this.a&&(this.a.resolve(),this.a=null);em=xb({type:"message",messageType:void 0==this.keyStatuses.Da()?"licenserequest":"licenserenewal",message:em.message.buffer});this.dispatchEvent(em);};j.wb=function(){this.a?(this.a.resolve(),this.a=null):this.b&&(ue(this,"usable"),this.b.resolve(),this.b=null);};j.xb=function(){var em=Error("EME v20140218 key error");em.errorCode=this.c.error;if(null!=this.a){this.a.reject(em),this.a=null;}else if(null!=this.b){this.b.reject(em),this.b=null;}else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:ue(this,"output-not-allowed");default:ue(this,"internal-error");}};function ue(em,fm){em.keyStatuses.Ia(fm);var gm=xb({type:"keystatuseschange"});em.dispatchEvent(gm);}function ve(){this.size=0;this.a=void 0;}var we;j=ve.prototype;j.Ia=function(em){this.size=void 0==em?0:1;this.a=em;};j.Da=function(){return this.a;};j.forEach=function(em){this.a&&em(we,this.a);};j.get=function(em){if(this.has(em))return this.a;};j.has=function(em){var fm=we;return this.a&&ud(new Uint8Array(em),new Uint8Array(fm))?true:false;};function xe(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(ke=(new Uint8Array([0])).buffer,Navigator.prototype.requestMediaKeySystemAccess=ae,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=be,i.MediaKeys=de,i.MediaKeySystemAccess=ce):i.MSMediaKeys?(we=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=oe,i.MediaKeys=pe,i.MediaKeySystemAccess=ne,Navigator.prototype.requestMediaKeySystemAccess=me):(Navigator.prototype.requestMediaKeySystemAccess=ka,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=la,i.MediaKeys=ma,i.MediaKeySystemAccess=na));}l("shaka.polyfill.MediaKeys.install",xe);l("shaka.polyfill.installAll",function(){ga();ia();bb();qa();xe();});var ye=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ze(em){var fm;em instanceof ze?(af(this,em.V),this.$=em.$,this.P=em.P,bf(this,em.ga),this.R=em.R,cf(this,em.a.clone()),this.Y=em.Y):em&&(fm=String(em).match(ye))?(af(this,fm[1]||"",true),this.$=df(fm[2]||""),this.P=df(fm[3]||"",true),bf(this,fm[4]),this.R=df(fm[5]||"",true),cf(this,fm[6]||"",true),this.Y=df(fm[7]||"")):this.a=new mf(null);}j=ze.prototype;j.V="";j.$="";j.P="";j.ga=null;j.R="";j.Y="";j.toString=function(){var em=[],fm=this.V;fm&&em.push(ef(fm,gf,true),":");if(fm=this.P){em.push("//");var gm=this.$;gm&&em.push(ef(gm,gf,true),"@");em.push(encodeURIComponent(fm).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));fm=this.ga;null!=fm&&em.push(":",String(fm));}if(fm=this.R)this.P&&"/"!=fm.charAt(0)&&em.push("/"),em.push(ef(fm,"/"==fm.charAt(0)?jf:hf,true));(fm=this.a.toString())&&em.push("?",fm);(fm=this.Y)&&em.push("#",ef(fm,lf));return em.join("");};j.resolve=function(em){var fm=this.clone();"data"===fm.V&&(fm=new ze());var gm=!!em.V;gm?af(fm,em.V):gm=!!em.$;gm?fm.$=em.$:gm=!!em.P;gm?fm.P=em.P:gm=null!=em.ga;var hm=em.R;if(gm){bf(fm,em.ga);}else if(gm=!!em.R){if("/"!=hm.charAt(0))if(this.P&&!this.R){hm="/"+hm;}else{var im=fm.R.lastIndexOf("/");-1!=im&&(hm=fm.R.substr(0,im+1)+hm);}if(".."==hm||"."==hm){hm="";}else if(-1!=hm.indexOf("./")||-1!=hm.indexOf("/.")){for(var im=0==hm.lastIndexOf("/",0),hm=hm.split("/"),jm=[],km=0;km<hm.length;){var lm=hm[km++];"."==lm?im&&km==hm.length&&jm.push(""):".."==lm?((1<jm.length||1==jm.length&&""!=jm[0])&&jm.pop(),im&&km==hm.length&&jm.push("")):(jm.push(lm),im=true);}hm=jm.join("/");}}gm?fm.R=hm:gm=""!==em.a.toString();gm?cf(fm,em.a.clone()):gm=!!em.Y;gm&&(fm.Y=em.Y);return fm;};j.clone=function(){return new ze(this);};function af(em,fm,gm){em.V=gm?df(fm,true):fm;em.V&&(em.V=em.V.replace(/:$/,""));}function bf(em,fm){if(fm){fm=Number(fm);if(isNaN(fm)||0>fm)throw Error("Bad port number "+fm);em.ga=fm;}else em.ga=null;}function cf(em,fm,gm){fm instanceof mf?em.a=fm:(gm||(fm=ef(fm,kf)),em.a=new mf(fm));}function df(em,fm){return em?fm?decodeURI(em):decodeURIComponent(em):"";}function ef(em,fm,gm){return "string"==typeof em?(em=encodeURI(em).replace(fm,ff),gm&&(em=em.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),em):null;}function ff(em){em=em.charCodeAt(0);return "%"+(em>>4&15).toString(16)+(em&15).toString(16);}var gf=/[#\/\?@]/g,hf=/[\#\?:]/g,jf=/[\#\?]/g,kf=/[\#\?@]/g,lf=/#/g;function mf(em){this.b=em||null;}mf.prototype.a=null;mf.prototype.c=null;function nf(em,fm,gm){if(!em.a&&(em.a={},em.c=0,em.b))for(var hm=em.b.split("&"),im=0;im<hm.length;im++){var jm=hm[im].indexOf("="),km=null,lm=null;0<=jm?(km=hm[im].substring(0,jm),lm=hm[im].substring(jm+1)):km=hm[im];km=decodeURIComponent(km.replace(/\+/g," "));lm=lm||"";nf(em,km,decodeURIComponent(lm.replace(/\+/g," ")));}em.b=null;(hm=em.a.hasOwnProperty(fm)&&em.a[fm])||(em.a[fm]=hm=[]);hm.push(gm);em.c++;}mf.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var em=[],fm;for(fm in this.a)for(var gm=encodeURIComponent(fm),hm=this.a[fm],im=0;im<hm.length;im++){var jm=gm;""!==hm[im]&&(jm+="="+encodeURIComponent(hm[im]));em.push(jm);}return this.b=em.join("&");};mf.prototype.clone=function(){var em=new mf();em.b=this.b;if(this.a){var fm={},gm;for(gm in this.a)fm[gm]=this.a[gm].concat();em.a=fm;em.c=this.c;}return em;};function of(em,fm,gm){em=(new DOMParser()).parseFromString(em,"text/xml");if(!em)return null;fm=fm||[new ze("")];gm=gm||[new ze("")];return mg({hb:fm,u:gm},em,pf);}l("shaka.dash.mpd.parseMpd",of);function pf(){this.id=this.url=null;this.type="static";this.b=this.j=this.u=this.hb=null;this.h=5;this.f=this.c=this.g=null;this.i=1;this.a=[];}function qf(){this.g=this.f=this.c=this.u=this.a=this.start=this.id=null;this.b=[];}function rf(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.u=null;this.j=[];this.a=[];}function sf(){this.value=null;}function tf(){this.contentType=this.lang=this.id=null;}function uf(){this.a=this.b=this.g=this.u=this.fbQualityClass=this.fbQualityLabel=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function vf(){this.b=this.a=this.c=this.f=null;}function wf(){this.parsedPssh=this.psshBox=null;}function xf(){this.url=null;}function yf(){this.url=null;}function zf(){this.u=null;this.h=1;this.c=this.b=this.f=this.a=this.g=null;}zf.prototype.clone=function(){var em=new zf();em.u=qg(this.u);em.h=this.h;em.g=this.g;em.a=rg(this.a);em.f=rg(this.f);em.b=rg(this.b);em.c=rg(this.c);return em;};function ag(){this.a=this.url=null;}ag.prototype.clone=function(){var em=new ag();em.url=qg(this.url);em.a=rg(this.a);return em;};function bg(){this.a=this.url=null;}bg.prototype.clone=function(){var em=new bg();em.url=qg(this.url);em.a=rg(this.a);return em;};function cg(){this.u=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}cg.prototype.clone=function(){var em=new cg();em.u=qg(this.u);em.a=this.a;em.g=this.g;em.c=this.c;em.i=this.i;em.h=rg(this.h);em.b=qg(this.b)||[];em.f=rg(this.f);return em;};function dg(){this.a=this.b=null;}dg.prototype.clone=function(){var em=new dg();em.b=qg(this.b);em.a=rg(this.a);return em;};function eg(){this.a=1;this.b=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}eg.prototype.clone=function(){var em=new eg();em.a=this.a;em.i=this.i;em.b=this.b;em.j=this.j;em.h=this.h;em.f=this.f;em.g=this.g;em.c=rg(this.c);return em;};function fg(){this.a=[];}fg.prototype.clone=function(){var em=new fg();em.a=qg(this.a)||[];return em;};function gg(){this.c=this.a=this.b=null;}gg.prototype.clone=function(){var em=new gg();em.b=this.b;em.a=this.a;em.c=this.c;return em;};function hg(em,fm){this.fa=em;this.end=fm;}hg.prototype.clone=function(){return new hg(this.fa,this.end);};pf.TAG_NAME="MPD";qf.TAG_NAME="Period";rf.TAG_NAME="AdaptationSet";sf.TAG_NAME="Role";tf.TAG_NAME="ContentComponent";uf.TAG_NAME="Representation";vf.TAG_NAME="ContentProtection";wf.TAG_NAME="cenc:pssh";xf.TAG_NAME="BaseURL";yf.TAG_NAME="Location";zf.TAG_NAME="SegmentBase";ag.TAG_NAME="RepresentationIndex";bg.TAG_NAME="Initialization";cg.TAG_NAME="SegmentList";dg.TAG_NAME="SegmentURL";eg.TAG_NAME="SegmentTemplate";fg.TAG_NAME="SegmentTimeline";gg.TAG_NAME="S";pf.prototype.parse=function(em,fm){this.url=em.hb;this.id=sg(fm,"id",zg);this.type=sg(fm,"type",zg)||"static";this.b=sg(fm,"mediaPresentationDuration",ug);this.h=sg(fm,"minBufferTime",ug,this.h);this.g=sg(fm,"minimumUpdatePeriod",ug,this.g);this.c=sg(fm,"availabilityStartTime",tg,this.c);this.f=sg(fm,"timeShiftBufferDepth",ug,this.f);this.f=null;this.i=sg(fm,"suggestedPresentationDelay",ug,this.i);var gm=em.u,hm=og(this,fm,xf);this.u=jg(gm,hm);if(hm=mg(this,fm,yf))this.j=kg(gm,hm.url);this.a=og(this,fm,qf);};qf.prototype.parse=function(em,fm){this.id=sg(fm,"id",zg);this.start=sg(fm,"start",ug);this.a=sg(fm,"duration",ug);var gm=og(this,fm,xf);this.u=jg(em.u,gm);this.c=mg(this,fm,zf);this.f=mg(this,fm,cg);this.g=mg(this,fm,eg);this.b=og(this,fm,rf);ig(this);};function ig(em){for(var fm=[],gm=0;gm<em.b.length;++gm){var hm=em.b[gm];null!=hm.group&&(fm[hm.group]=true);}for(gm=0;gm<em.b.length;++gm)if(hm=em.b[gm],null==hm.group){for(var im=1;1==fm[im];)++im;fm[im]=true;hm.group=im;}}rf.prototype.parse=function(em,fm){var gm=mg(this,fm,tf)||{},hm=mg(this,fm,sf);this.id=sg(fm,"id",zg);this.group=sg(fm,"group",yg);this.lang=sg(fm,"lang",zg,gm.lang);this.contentType=sg(fm,"contentType",zg,gm.contentType);this.width=sg(fm,"width",xg);this.height=sg(fm,"height",xg);this.b=sg(fm,"mimeType",zg);this.i=sg(fm,"codecs",zg);this.c=hm&&"main"==hm.value;this.lang&&(this.lang=cc(this.lang));gm=og(this,fm,xf);this.u=jg(em.u,gm);this.j=og(this,fm,vf);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=em.c?lg(this,fm,em.c):mg(this,fm,zf);this.g=em.f?lg(this,fm,em.f):mg(this,fm,cg);this.h=em.g?lg(this,fm,em.g):mg(this,fm,eg);this.a=og(this,fm,uf);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};sf.prototype.parse=function(em,fm){this.value=sg(fm,"value",zg);};tf.prototype.parse=function(em,fm){this.id=sg(fm,"id",zg);this.lang=sg(fm,"lang",zg);this.contentType=sg(fm,"contentType",zg);this.lang&&(this.lang=cc(this.lang));};uf.prototype.parse=function(em,fm){this.id=sg(fm,"id",zg);this.bandwidth=sg(fm,"bandwidth",xg);this.width=sg(fm,"width",xg,em.width);this.height=sg(fm,"height",xg,em.height);this.f=sg(fm,"mimeType",zg,em.b);this.h=sg(fm,"codecs",zg,em.i);this.fbQualityLabel=sg(fm,"FBQualityLabel",zg);this.fbQualityClass=sg(fm,"FBQualityClass",zg);this.lang=em.lang;var gm=og(this,fm,xf);this.u=jg(em.u,gm);this.c=og(this,fm,vf);this.g=em.f?lg(this,fm,em.f):mg(this,fm,zf);this.b=em.g?lg(this,fm,em.g):mg(this,fm,cg);this.a=em.h?lg(this,fm,em.h):mg(this,fm,eg);this.c=this.c.concat(em.j);};vf.prototype.parse=function(em,fm){this.f=fm;this.c=sg(fm,"schemeIdUri",zg);var gm=sg(fm,"cenc:default_KID",zg);gm&&(this.b=gm.replace(/[-]/g,""));this.a=mg(this,fm,wf);};wf.prototype.parse=function(em,fm){var gm=pg(fm);if(gm){this.psshBox=sd(gm);try{this.parsedPssh=new le(this.psshBox);}catch(hm){if(!(hm instanceof RangeError))throw hm;}}};xf.prototype.parse=function(em,fm){this.url=pg(fm);};yf.prototype.parse=function(em,fm){this.url=pg(fm);};zf.prototype.parse=function(em,fm){this.u=em.u||this.u;this.h=sg(fm,"timescale",xg,this.h);this.g=sg(fm,"presentationTimeOffset",yg,this.g);this.a=sg(fm,"indexRange",vg,this.a);this.f=sg(fm,"FBFirstSegmentRange",vg,this.f);this.b=mg(this,fm,ag)||this.b;this.c=mg(this,fm,bg)||this.c;};ag.prototype.parse=function(em,fm){var gm=sg(fm,"sourceURL",zg);this.url=kg(em.u,gm);this.a=sg(fm,"range",vg,rg(em.a));};bg.prototype.parse=function(em,fm){var gm=sg(fm,"sourceURL",zg);this.url=kg(em.u,gm);this.a=sg(fm,"range",vg);};cg.prototype.parse=function(em,fm){this.u=em.u||this.u;this.a=sg(fm,"timescale",xg,this.a);this.g=sg(fm,"presentationTimeOffset",yg,this.g);this.c=sg(fm,"duration",xg,this.c);var gm=sg(fm,"startNumber",xg);null!=gm&&(this.i=gm);this.h=mg(this,fm,bg)||this.h;this.b=(gm=og(this,fm,dg))&&0<gm.length?gm:this.b;this.f=mg(this,fm,fg)||this.f;};dg.prototype.parse=function(em,fm){var gm=sg(fm,"media",zg);this.b=kg(em.u,gm);this.a=sg(fm,"mediaRange",vg);};eg.prototype.parse=function(em,fm){this.a=sg(fm,"timescale",xg,this.a);this.i=sg(fm,"presentationTimeOffset",yg,this.i);this.b=sg(fm,"duration",xg,this.b);var gm=sg(fm,"startNumber",yg);null!=gm&&(this.j=gm);this.h=sg(fm,"media",zg,this.h);this.f=sg(fm,"index",zg,this.f);this.g=sg(fm,"initialization",zg,this.g);this.c=mg(this,fm,fg)||this.c;};fg.prototype.parse=function(em,fm){this.a=og(this,fm,gg);};gg.prototype.parse=function(em,fm){this.b=sg(fm,"t",yg);this.a=sg(fm,"d",yg);this.c=sg(fm,"r",wg);};function jg(em,fm){if(!fm||0===fm.length)return em;for(var gm=[],hm=0;hm<fm.length;hm++){var im=fm[hm].url;null==em||0===em.length?gm.push(new ze(im)):(im=kg(em.slice(0,1),im),gm.push(im[0]));}return gm;}function kg(em,fm){if(!fm)return em;var gm=new ze(fm);return em?em.map(function(hm){return hm.resolve(gm);}):[gm];}function lg(em,fm,gm){var hm=rg(gm);(fm=ng(fm,gm.constructor.TAG_NAME))&&hm.parse(em,fm);return hm;}function mg(em,fm,gm){var hm=null;if(fm=ng(fm,gm.TAG_NAME))hm=new gm(),hm.parse(em,fm);return hm;}function ng(em,fm){for(var gm=null,hm=0;hm<em.childNodes.length;hm++)if(em.childNodes[hm].tagName==fm){if(gm)return null;gm=em.childNodes[hm];}return gm;}function og(em,fm,gm){for(var hm=[],im=0;im<fm.childNodes.length;im++)if(fm.childNodes[im].tagName==gm.TAG_NAME){var jm=new gm();jm.parse.call(jm,em,fm.childNodes[im]);hm.push(jm);}return hm;}function pg(em){em=em.firstChild;return em.nodeType!=Node.TEXT_NODE?null:em.nodeValue;}function qg(em){return em?em.map(function(fm){return fm.clone();}):null;}function rg(em){return em?em.clone():null;}function sg(em,fm,gm,hm){em=gm(em.getAttribute(fm));return null!=em?em:void 0!==hm?hm:null;}function tg(em){if(!em)return null;em=Date.parse(em);return isNaN(em)?null:Math.floor(em/1000);}function ug(em){if(!em)return null;var fm=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(em);if(!fm)return null;em=0;var gm=yg(fm[1]);gm&&(em+=31536000*gm);(gm=yg(fm[2]))&&(em+=2592000*gm);(gm=yg(fm[3]))&&(em+=86400*gm);(gm=yg(fm[4]))&&(em+=3600*gm);(gm=yg(fm[5]))&&(em+=60*gm);fm=i.parseFloat(fm[6]);(fm=isNaN(fm)?null:fm)&&(em+=fm);return em;}function vg(em){var fm=/([0-9]+)-([0-9]+)/.exec(em);if(!fm)return null;em=yg(fm[1]);if(null==em)return null;fm=yg(fm[2]);return null==fm?null:new hg(em,fm);}function wg(em){em=i.parseInt(em,10);return isNaN(em)?null:em;}function xg(em){em=i.parseInt(em,10);return 0<em?em:null;}function yg(em){em=i.parseInt(em,10);return 0<=em?em:null;}function zg(em){return em;}function ah(em,fm){this.url=em;this.b=fm||new bh();this.g=this.j=this.h=0;this.a=null;this.c=new xc();this.f=null;}l("shaka.util.AjaxRequest",ah);function bh(){this.body=null;this.a=1;this.i=1000;this.c=0;this.method="GET";this.g="arraybuffer";this.b={};this.h=this.l=false;this.f=this.m=null;this.j=false;}var ch=true;function dh(em){eh(em);em.b.body=null;em.c.destroy();em.c=null;em.f=null;}function eh(em){em.a&&(em.a.onload=null,em.a.onreadystatechange=null,em.a.onerror=null,em.a.ontimeout=null);em.a=null;}var fh=/(.*)\.(xx|fna)\.fbcdn\.net/;ah.prototype.i=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var em=this.url.split(":")[1].split(";").pop().split(","),fm=em.pop(),fm="base64"==em.pop()?i.atob(fm.replace(/-/g,"+").replace(/_/g,"/")):i.decodeURIComponent(fm);"arraybuffer"==this.b.g&&(fm=rd(fm).buffer);em=JSON.parse(JSON.stringify(new XMLHttpRequest()));em.response=fm;em.responseText=fm.toString();fm=this.c;fm.resolve(em);dh(this);return fm;}if(0==this.url.lastIndexOf("idb:",0))return this.A();this.h++;this.j=Date.now();this.g||(this.g=this.b.i);this.a=new XMLHttpRequest();var gm=this.url,fm=new ze(gm);ch&&(this.f&&!this.f.supportsCaching()||this.b.h)&&nf(fm.a,"_",Date.now());gm=fh.test(gm);if(null!=this.b.f&&gm){var hm=this.b.f,im=fm.a;nf(im,"_nc_x-fb-dash-push-segments",hm.c);null!=hm.b?nf(im,"_nc_x-fb-dash-latest-segment-start-time",hm.b):null!=hm.a&&nf(im,"_nc_x-fb-dash-latest-segment-offset",hm.a);}1==this.b.j&&gm&&nf(fm.a,"_nc_playing",1);gm=fm.toString();this.a.open(this.b.method,gm,true);this.a.responseType=this.b.g;this.a.timeout=this.b.c;this.a.withCredentials=this.b.l;this.a.onload=this.l.bind(this);this.a.onreadystatechange=this.m.bind(this);this.a.onerror=this.v.bind(this);this.a.ontimeout=this.s.bind(this);for(em in this.b.b)this.a.setRequestHeader(em,this.b.b[em]);this.a.send(this.b.body);return this.c;};ah.prototype.send=ah.prototype.i;function gh(em,fm,gm){fm=Error(fm);fm.type=gm;fm.status=em.a.status;fm.url=em.url;fm.method=em.b.method;fm.body=em.b.body;fm.Rb=em.a;return fm;}ah.prototype.l=function(em){this.f&&this.f.sample(Date.now()-this.j,em.loaded);em=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),dh(this)):this.h<this.b.a&&-1===em.indexOf(this.a.status)?hh(this):(em=gh(this,"HTTP error.","net"),this.c.reject(em),dh(this));};ah.prototype.m=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.ha=Date.now()-this.j,this.b.h)){var em=Date.parse(this.a.getResponseHeader("Date"));em&&(fb=em-Date.now());}};ah.prototype.v=function(){var em=gh(this,"Network failure.","net");this.c.reject(em);dh(this);};ah.prototype.s=function(){if(this.h<this.b.a){hh(this);}else{var em=gh(this,"Request timed out.","net");this.c.reject(em);dh(this);}};function hh(em){eh(em);i.setTimeout(em.i.bind(em),em.g*(1+.5*(2*Math.random()-1)));em.g*=2;}function ih(em,fm,gm,hm){this.b=fm;this.h=gm||0;this.g=null!=hm?hm:null;this.c=this.a=null;this.j=em;this.i=null;}var jh;l("shaka.util.FailoverUri",ih);function kh(em,fm){return em&&0!==em.length?em.map(function(gm){return gm.resolve(fm);}):[fm];}ih.setPrefetchCacheValueGetter=function(em){jh=em;};function lh(em,fm,gm){if(em.a)return em.a;em.a=mh(em,0,fm||new bh(),gm);return em.a;}ih.prototype.f=function(){if(this.c){this.a=null;var em=this.c;if(em.a&&em.a.readyState!=XMLHttpRequest.DONE){em.a.abort();var fm=gh(em,"Request aborted.","aborted");em.c.reject(fm);dh(em);}this.i=this.c=null;}};function mh(em,fm,gm,hm){var im=em.b[fm].toString();if(em.h||em.g){var jm=em.b[fm].P;!jm.endsWith("fbcdn.net")||jm.startsWith("interncache")||jm.endsWith("ak.fbcdn.net")?gm.b.Range="bytes="+(em.h+"-"+(null!=em.g?em.g:"")):im+="&bytestart="+em.h+"&byteend="+em.g;}em.j&&(im=em.j(im,gm.b)||im);jm=null;jh&&(jm=jh(im));jm||(em.c=new ah(im,gm),hm&&(em.c.f=hm),jm=em.c.i());im=jm.then(dd(em,function(km){this.i=this.c=this.a=null;this.i=km.a?new ze(km.a):this.b[fm];km.response.ha=km.ha;return Promise.resolve(km.response);}));return im=im.catch(dd(em,function(km){if(this.a&&fm+1<this.b.length)return this.a=mh(this,fm+1,gm,hm);this.a=this.c=null;return Promise.reject(km);}));}ih.prototype.clone=function(){return new ih(this.j,this.b.map(function(em){return em.clone();}),this.h,this.g);};ih.prototype.toString=function(){return this.b[0].toString();};function nh(em){this.c=em;this.a=this.b=null;}function oh(em,fm,gm){this.a=new bh();this.a.g="text";this.a.a=3;this.a.c=1000*(null!=fm?fm:0);gm&&(this.a.f=gm);this.a.h=true;this.b=em;}function ph(em){var fm=em.b;return lh(fm,em.a).then(function(gm){if(gm=of(gm,fm.b,[fm.i]))return Promise.resolve(gm);gm=Error("MPD parse failure.");gm.type="dash";return Promise.reject(gm);});}function qh(em,fm,gm,hm){for(var im=fm.a,jm=[],km=0;km<hm;++km){var lm=km+gm,mm=(lm-1)*im.b,nm=mm/im.a,om=(mm+im.b)/im.a,lm=rh(em,fm,im.j+lm-1,mm);if(!lm)return null;jm.push(new vh(nm,om,lm,mm));}return jm;}function rh(em,fm,gm,hm){if(!fm.a)return null;var im=fm.a.h;if(!im)return fm.u?new ih(em,fm.u,0,null):null;gm=sh(im,fm.id,gm,fm.bandwidth,hm);if(!gm)return null;fm=kh(fm.u,gm);return new ih(em,fm,0,null);}function sh(em,fm,gm,hm,im){var jm={RepresentationID:fm,Number:gm,Bandwidth:hm,Time:im};em=em.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(lm,mm,nm){if("$$"==lm)return "$";var om=jm[mm];if(null==om)return lm;"RepresentationID"==mm&&nm&&(nm=void 0);lm=om.toString();nm=i.parseInt(nm,10)||1;nm=Math.max(0,nm-lm.length);return Array(nm+1).join("0")+lm;});try{return new ze(em);}catch(km){if(km instanceof URIError)return null;throw km;}}function th(em,fm,gm){var hm=0;fm*=gm;em=em.a;gm=[];for(var im=0;im<em.length&&em[im].a;++im){var jm=em[im].b,jm=null!=jm?jm:hm,km=em[im].c||0;0>km&&(km=em[im].a,km=im+1===em.length?Math.ceil((em[0].b+fm-jm)/km)-1:Math.ceil((em[im+1].b-jm)/km)-1);0<gm.length&&jm!=hm&&(gm[gm.length-1].end=jm);for(var lm=0;lm<=km;++lm)hm=jm+em[im].a,gm.push({start:jm,end:hm}),jm=hm;}return gm;}function uh(em,fm){this.a=em;this.b=fm||null;}uh.prototype.destroy=function(){this.a&&(this.a.f(),this.a=null);this.b=null;};uh.prototype.create=function(){return this.a?lh(this.a):Promise.resolve(this.b);};function vh(em,fm,gm,hm){this.b=em;this.a=fm;this.url=gm;this.c=null!=hm?hm:null;}function wh(em,fm,gm){return new vh(fm,gm,em.url,null!=em.c?em.c:void 0);}function xh(em,fm){for(var gm=em.length-1;0<=gm;--gm){var hm=em[gm];if(fm>=hm.b&&(null==hm.a||fm<hm.a))return gm;}return -1;}function yh(em,fm){return em.map(function(gm){return wh(gm,gm.b+fm,null!=gm.a?gm.a+fm:null);});}function zh(){}zh.prototype.parse=function(em,fm,gm,hm,im){var jm=null;try{em:{var lm=[],mm=new gb(em),nm=kb(mm);if(1936286840!=kb(mm)){jm=null;}else{1==nm&&(nm=lb(mm));var om=jb(mm);nb(mm,3);nb(mm,4);var pm=kb(mm);if(0==pm){jm=null;}else{var qm,rm;0==om?(qm=kb(mm),rm=kb(mm)):(qm=lb(mm),rm=lb(mm));nb(mm,2);var sm=mm.b.getUint16(mm.a,mm.c);mm.a+=2;em=qm;fm=fm+nm+rm;for(rm=nm=0;rm<sm;rm++){var tm=kb(mm);qm=(tm&2147483648)>>>31;var om=tm&2147483647,um=kb(mm);kb(mm);if(1==qm){jm=null;break em;}var vm;vm=0==rm&&im?im:new ih(hm,gm,fm,fm+om-1);qm=em/pm;var wm=(em+um)/pm;0===rm&&(nm=qm);lm.push(new vh(qm-nm,wm-nm,vm));em+=um;fm+=om;}jm=lm;}}};}catch(km){if(!(km instanceof RangeError))throw km;}return jm;};function ai(em){this.a=em;this.W=0;this.j=[];this.Ma=false;}ai.prototype.D=function(){return Math.floor((this.j.length-1-this.j.lastIndexOf(true))/2);};ai.prototype.getConsecutiveUpdatesWithoutChanges=ai.prototype.D;ai.prototype.B=function(){return this.j.length-1-this.j.lastIndexOf(false);};ai.prototype.getConsecutiveUpdatesWithChanges=ai.prototype.B;ai.prototype.destroy=function(){this.a=null;};j=ai.prototype;j.length=function(){return this.a.length;};function bi(em){if(0==em.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return em.a[0];}j.w=function(){if(0==this.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.a[this.a.length-1];};j.get=function(em){if(0>em||em>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[em];};j.ja=function(em){em=xh(this.a,em);return 0<=em?this.a[em]:null;};j.Fa=function(em){ci(this,em);return true;};function ci(em,fm){em.W!=fm.W&&(fm=new ai(yh(fm.a,em.W-fm.W)));if(0==em.length()){em.a=fm.a.slice(0);}else if(0!=fm.length()&&null!=em.w().a)if(null!=fm.w().a&&fm.w().a<em.w().a){em.Ma=true;}else{em.Ma=false;if(em.w().a<=bi(fm).b){var gm=wh(em.w(),em.w().b,bi(fm).b),gm=em.a.slice(0,-1).concat([gm]);}else{var hm;for(hm=0;hm<em.a.length&&!(em.a[hm].a>=bi(fm).b);++hm);em.a[hm].b<bi(fm).b?(gm=wh(em.a[hm],em.a[hm].b,bi(fm).b),gm=em.a.slice(0,hm).concat([gm])):(bi(em).b>bi(fm).b||bi(fm),gm=em.a.slice(0,hm));}em.a=gm.concat(fm.a);}}j.ia=function(em){var fm=em-this.W;if(0==fm)return 0;this.a=yh(this.a,fm);this.W=em;return fm;};j.Ba=function(){return 0<this.length()?{start:bi(this).b,end:this.w().a}:{start:0,end:0};};function di(em,fm,gm,hm){ai.call(this,em);this.h=fm;this.A=gm;this.g=hm;this.i=this.h.b||this.h.a.reduce(function(im,jm){return null==jm.a?NaN:im+jm.a;},0)||0;this.b=this.s=this.f=null;ei(this);}m(di,ai);di.prototype.destroy=function(){this.A=this.h=null;ai.prototype.destroy.call(this);};di.prototype.ja=function(em){gi(this,eb()/1000);return ai.prototype.ja.call(this,em);};di.prototype.Fa=function(em){if(!(em instanceof di))return false;ci(this,em);this.i=Math.max(this.i,em.i);null==this.f?(this.g=em.g,ei(this)):hi(this);return true;};function ei(em){hi(em);if(0!=em.length()){em.length();var fm=null!=em.w().a?em.w().a:em.w().b;if(em.h.c>em.g){em.f=fm;}else{var gm=em.g-(em.h.c+em.A.start);0>gm?em.f=fm:gm<Math.max(em.w().b,em.w().a||0)?(em.w(),em.f=fm):em.f=gm;}em.s=em.w().b;em.b=bi(em).b;}}di.prototype.ia=function(em){em=ai.prototype.ia.call(this,em);Math.min.apply(null,this.a.filter(function(fm){return null!=fm.a;}).map(function(fm){return fm.a-fm.b;}));null!=this.f&&(this.s+=em,this.b+=em,this.f+=em);return em;};di.prototype.Ba=function(){return fi(this,eb()/1000);};function fi(em,fm){gi(em,fm);if(null==em.f||null==em.s||null==em.b)return {start:0,end:0};var gm=Number.POSITIVE_INFINITY;em.i&&(gm=em.i);var hm=fm-em.g,im=em.f+hm;null!=em.h.f&&(im=im-em.b-em.h.f,0<im&&(em.b+=im));em.b=Math.min(em.b,gm);hm=em.s+hm;if(hm<em.b)return {start:em.b,end:em.b};hm=0<em.length()?null!=em.w().a?Math.min(hm,em.w().a):hm:em.b;hm=Math.max(hm,em.b);hm=Math.min(hm,gm);return {start:em.b,end:hm};}function gi(em,fm){hi(em);if(null!=em.h.f)if(null==em.f){em.length();}else{for(var gm=em.f+(fm-em.g),hm=0,im=0;im<em.a.length;++im){var jm=null;im<em.a.length-1?jm=em.a[im+1].a:(jm=em.a[im],jm=null!=jm.a?jm.a+(jm.a-jm.b):null);if(null!=jm&&jm<gm-em.h.f){++hm;}else break;}0<hm&&em.a.splice(0,hm);}}function hi(em){if(em.i){for(var fm=0,gm=em.a.length-1;0<=gm;--gm)if(em.a[gm].b>em.i){++fm;}else break;0<fm&&em.a.splice(-fm);}}function ii(em,fm,gm,hm,im){var jm=1,km=0,lm;if(em.c>hm){lm=null;}else{var mm=em.i||0,nm=em.f||0;lm=gm.a;lm=lm.b/lm.a;var om=hm-(em.c+fm.start);0>om?lm=null:(nm=om-2*lm-nm,0>nm&&(nm=0),nm=Math.ceil(nm/lm)*lm,om-=lm,0>om?lm=null:(mm=Math.floor(om/lm)*lm-mm,0>mm&&(mm=0),mm=Math.floor(mm/lm)*lm,lm={Xa:nm/lm+1,current:(mm>=nm?mm:nm)/lm+1}));}lm&&(jm=lm.Xa,km=lm.current-lm.Xa+1);jm=qh(im,gm,jm,km);if(null==jm)throw em=Error("Failed to generate SegmentReferences."),em.type="stream",em;di.call(this,jm,em,fm,hm);this.v=gm;this.m=this.c=0<this.length()?em.c+fm.start+this.w().a:null;this.l=lm?lm.current+1:null;this.S=im;}m(ii,di);ii.prototype.destroy=function(){this.S=this.v=null;di.prototype.destroy.call(this);};ii.prototype.ja=function(em){var fm=eb()/1000;ji(this,fm);gi(this,fm);return ai.prototype.ja.call(this,em);};ii.prototype.Fa=function(em){if(null!=this.c||!(em instanceof ii)||null==em.c)return false;this.c=em.c;this.m=em.m;this.l=em.l;this.g=em.g;this.i=em.i;ci(this,em);ji(this,eb()/1000);ei(this);return true;};ii.prototype.ia=function(em){em=di.prototype.ia.call(this,em);null!=this.c&&(this.c+=em,this.m+=em);return em;};ii.prototype.Ba=function(){var em=eb()/1000;ji(this,em);return fi(this,em);};function ji(em,fm){if(null!=em.c&&null!=em.m&&null!=em.l){var gm=em.v.a,gm=gm.b/gm.a,hm=Math.floor((em.m+(fm-em.g)-em.c)/gm);if(0!=hm){var im=qh(em.S,em.v,em.l,hm);Array.prototype.push.apply(em.a,yh(im,em.W));em.c+=hm*gm;em.l+=hm;}}}function ki(em,fm,gm,hm,im){this.f=em;this.b=fm;this.c=gm;this.h=hm;this.a=null;this.g=im;}ki.prototype.destroy=function(){this.g=this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};ki.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.f.type){try{this.a=new ii(this.f,this.b,this.c,this.h,this.g);}catch(em){return Promise.reject(em);}}else{var fm;fm=this.c.a;if(fm=qh(this.g,this.c,1,Math.ceil(this.b.a/(fm.b/fm.a)))){if(0<fm.length){var gm=fm[fm.length-1];fm[fm.length-1]=wh(gm,gm.b,this.b.a);}fm=new ai(fm);}else fm=null;this.a=fm;if(!this.a)return fm=Error("Failed to generate SegmentReferences"),fm.type="stream",Promise.reject(fm);}return Promise.resolve(this.a);};function li(em,fm,gm,hm,im){this.c=em;this.b=fm;this.g=gm;this.a=null;this.h=hm;this.f=im;}li.prototype.destroy=function(){this.f=this.g=this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);};li.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var em=this.g.b,fm=[];em.f&&(fm=th(em.f,em.a||1,this.b.a||0));var gm=0;em.c&&em.i?gm=(em.i-1)*em.c:0<fm.length&&(gm=fm[0].start-(em.g||0));var hm=gm,im=em.b.length;0<fm.length&&fm.length!=em.b.length&&(im=Math.min(fm.length,em.b.length));for(var jm=[],km=0;km<im;++km){var lm=em.b[km],mm=gm/em.a,nm=null,om=null;em.c?(nm=gm+em.c,om=nm/em.a):0<fm.length?(nm=fm[km].end-(em.g||0),om=nm/em.a):(om=mm+this.b.a,nm=om*em.a);var gm=nm,nm=0,pm=null;lm.a&&(nm=lm.a.fa,pm=lm.a.end);om=Math.min(this.b.a+hm/em.a,om);jm.push(new vh(mm,om,new ih(this.f,lm.b,nm,pm)));}"dynamic"==this.c.type?this.a=new di(jm,this.c,this.b,this.h):this.a=new ai(jm);return Promise.resolve(this.a);};function mi(em,fm,gm,hm,im){this.b=em;this.c=fm;this.f=gm;this.h=hm;this.a=null;this.g=im;}mi.prototype.destroy=function(){this.g=this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};mi.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var em=this.f.a,fm=th(em.c,em.a||1,this.c.a||0),gm=[],hm=0;hm<fm.length;++hm){var im=fm[hm].start,jm=im/em.a,km=fm[hm].end/em.a,lm=rh(this.g,this.f,hm+em.j,im);if(!lm)return em=Error("Failed to generate media URL."),em.type="dash",Promise.reject(em);var mm=(em.i||0)/em.a;gm.push(new vh(jm-mm,km-mm,lm,im));}"dynamic"==this.b.type?this.a=new di(gm,this.b,this.c,this.h):this.a=new ai(gm);return Promise.resolve(this.a);};function ni(){this.C=oi++;this.id=this.K=this.J=null;this.b=0;this.height=this.width=this.bandwidth=null;this.c=this.a="";this.switchReason=this.fbQualityClass=this.fbQualityLabel=null;this.f=[];this.O=false;this.H=true;}var oi=0;ni.prototype.destroy=function(){this.J&&(this.J.destroy(),this.J=null);this.K&&(this.K.destroy(),this.K=null);};function pi(em){var fm=em.a||"";em.c&&(fm+='; codecs="'+em.c+'"');return fm;}function qi(){this.C=ri++;this.id=null;this.contentType=this.lang="";this.b=false;this.o=[];this.a=[];}var ri=0;qi.prototype.destroy=function(){for(var em=0;em<this.o.length;++em)this.o[em].destroy();this.a=this.o=null;};function si(em){for(var fm=[],gm=0;gm<em.a.length;++gm){var hm=new vi();hm.id=em.C;hm.a=em.a[gm];hm.contentType=em.contentType;hm.b=em.o.length?pi(em.o[0]):"";fm.push(hm);}return fm;}function ti(){this.id=null;this.start=0;this.b=null;this.a=[];}ti.prototype.destroy=function(){for(var em=0;em<this.a.length;++em)this.a[em].destroy();this.a=null;};function ui(){this.b=false;this.h=this.g=this.f=null;this.c=0;this.a=[];this.i=false;}ui.prototype.destroy=function(){for(var em=0;em<this.a.length;++em)this.a[em].destroy();this.a=null;};function vi(){this.id=0;this.a=null;this.b=this.contentType="";}function wi(em,fm,gm,hm,im,jm){sc.call(this,em);this.b=fm;this.a=new ed(gm,hm,im);this.N=0;this.A=this.F=this.c=null;this.G=false;this.g=this.v=null;this.m=false;this.j=null;this.i=false;this.h=new xc();this.l=this.f=false;this.s=0;this.L=15;this.U=this.I=false;this.T=jm;this.B=this.M=false;}m(wi,sc);wi.prototype.D=function(em){null!=em.initialStreamBufferSize&&(this.s=Number(em.initialStreamBufferSize));null!=em.streamBufferSize&&(this.L=Number(em.streamBufferSize));null!=em.addCdnDebugQueryParameters&&(this.I=Boolean(em.addCdnDebugQueryParameters));null!=em.useInitialBufferSizeWhenPaused&&(this.U=Boolean(em.useInitialBufferSizeWhenPaused));null!=em.segmentRequestTimeout&&(this.a.m=Number(em.segmentRequestTimeout));null!=em.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.M=Boolean(em.resolveVideoTimeUpdateOnFragmentedTimeRanges));};wi.prototype.destroy=function(){ej(this);this.h.destroy();this.c=this.h=null;this.a.destroy();this.S=this.b=this.a=null;};j=wi.prototype;j.pa=function(){return this.c;};j.Ca=function(){return this.F;};j.lb=function(em){this.f||em.then(function(){this.f=true;this.g||dj(this,0);}.bind(this)).catch(function(){});return this.h;};j.Ea=function(){return this.l;};j.qa=function(em,fm,gm,hm){em!=this.c&&(this.A=em.K.create(),em.J.create().then(dd(this,function(im){if(this.b){var jm=this.c;this.c=em;this.F=im;this.G=true;this.v=hm?hm:null;this.m||(jm?fm&&xi(this,true,gm):dj(this,0));}})).catch(dd(this,function(im){"aborted"!=im.type&&(this.f?(im=yb(im),this.dispatchEvent(im)):this.h.reject(im));})));};j.ib=function(){return xi(this,false);};function xi(em,fm,gm){em.c&&!em.m&&(em.m=true,ej(em),ld(em.a).then(dd(em,function(){var hm=this.b.currentTime;if(!fm&&0<gd(this.a,hm)&&0<=xh(this.a.b,hm))return Promise.resolve();if(gm)return kd(this.a,this.b.currentTime+gm);this.B=true;return jd(this.a);})).then(dd(em,function(){this.m=false;dj(this,0);})).catch(dd(em,function(hm){this.m=false;this.f?(hm=yb(hm),this.dispatchEvent(hm)):this.h.reject(hm);})));}j.jb=function(em){return 0<gd(this.a,em)&&0<=xh(this.a.b,em);};j.ta=function(){};j.za=function(){return true;};function yi(em){var fm=em.U&&em.b.paused?em.s:em.L;return em.i?Math.max(em.s,fm):em.s;}j.Fb=function(){if(this.i&&!this.f){this.g=null;}else{var em;if(em=this.f&&!this.l)em=1<this.a.c.buffered.length?true:false;if(em){this.M&&(this.b.currentTime=md(this.a,this.b.currentTime)),xi(this,true);}else{this.g=null;em=this.c;var fm=this.F,gm=this.b.currentTime;if(gd(this.a,this.i?gm:gm+(this.j||0))>=yi(this)){aj(this),dj(this,1000/(5*(Math.abs(this.b.playbackRate)||1)));}else{var hm=zi(this,gm,fm);hm?(fm=id(this.a,hm,em.b,this.A,this.I&&!this.b.paused),this.T&&"video"===em.a.split("/")[0]&&this.T(hm.b,hm.a,{id:em.id,reason:this.v}),this.A=null,this.G&&(this.G=false,hm=this.v,this.v=null,bj(this,em,hm)),this.l=false,fm.then(dd(this,function(im){var jm=im.W;im=im.nb;this.i||(this.N=im);null==this.j&&(this.j=jm);this.B&&0<gd(this.a,gm)&&(this.B=false,this.b.currentTime+=.001);dj(this,0);})).catch(dd(this,function(im){if("aborted"!=im.type){var jm=[0,404,410,502,503,504];"net"==im.type&&-1!=jm.indexOf(im.Rb.status)&&this.c&&dj(this,1000);im=yb(im);this.dispatchEvent(im);}}))):(aj(this),this.f&&!this.l&&(this.l=true,cj(this)),dj(this,200));}}}};function zi(em,fm,gm){em=em.a;var hm=em.b.length;em=0<hm?em.b[hm-1]:null;return null!=em?null!=em.a?gm.ja(em.a):null:gm.ja(fm)||(gm.length()?gm.w():null);}function aj(em){if(!em.i&&null!=em.j){em.i=true;var fm=em.a,gm=em.j,hm=gm-fm.s;0!=hm&&(fm.b=yh(fm.b,hm),fm.s=gm);em.h.resolve(em.j);}}function bj(em,fm,gm){var hm=fm.a.split("/")[0];fm=xb({type:"adaptation",bubbles:true,contentType:hm,size:"video"!=hm?null:{width:fm.width,height:fm.height},bandwidth:fm.bandwidth,reason:gm});em.dispatchEvent(fm);}function cj(em){var fm=xb({type:"ended"});em.dispatchEvent(fm);}function dj(em,fm){em.g=i.setTimeout(em.Fb.bind(em),fm);}function ej(em){null!=em.g&&(i.clearTimeout(em.g),em.g=null);}j.Aa=function(){return this.N;};function fj(em){this.b=em;this.a=null;}fj.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};fj.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var em=new vh(0,null,this.b);this.a=new ai([em]);return Promise.resolve(this.a);};function gj(em,fm){sc.call(this,em);this.b=fm;this.g=true;this.h=this.f=null;this.c=new xc();this.a=null;}m(gj,sc);gj.prototype.D=function(){};gj.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.S=this.b=this.f=this.h=this.a=this.c=null;};j=gj.prototype;j.pa=function(){return this.f;};j.Ca=function(){return this.h;};j.lb=function(){return this.c;};j.Ea=function(){return true;};j.qa=function(em){em.J.create().then(dd(this,function(fm){if(this.b){if(0==fm.length())return Promise.reject(Error("No subtitles URL available."));var gm=this.f;this.f=em;this.h=fm;fm=bi(fm).url.b[0].toString();var hm=this.za();this.a&&(this.ta(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=fm;this.ta(hm);fm=xb({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:em.bandwidth});this.dispatchEvent(fm);gm||this.c.resolve(0);}}));};j.ib=function(){};j.jb=function(){return true;};j.ta=function(em){this.g=em;this.a&&(this.a.track.mode=em?"showing":"disabled");};j.za=function(){this.a&&(this.g="showing"==this.a.track.mode);return this.g;};function hj(){}hj.prototype.parse=function(em,fm,gm,hm){var im=null;try{var km,lm=new ob(fm);if(440786851!=qb(lm).id){km=null;}else{var mm=qb(lm);if(408125543!=mm.id){km=null;}else{var nm=mm.a.byteOffset,om,pm=new ob(mm.a);for(fm=null;ib(pm.a);){var qm=qb(pm);if(357149030==qm.id){fm=qm;break;}}if(fm){for(var rm=new ob(fm.a),pm=1e+06;ib(rm.a);){var sm=qb(rm);if(2807729==sm.id){pm=tb(sm);break;}}om=pm/1e+09;}else om=null;km=om?{Lb:nm,Pb:om}:null;}}if(km){var tm=qb(new ob(em));if(475249515!=tm.id){im=null;}else{var um=km.Lb,vm=km.Pb;em=[];var wm=new ob(tm.a);for(km=tm=-1;ib(wm.a);){var xm=qb(wm);if(187==xm.id){var ym,zm=new ob(xm.a),an=qb(zm);if(179!=an.id){ym=null;}else{var bn=tb(an),cn=qb(zm);if(183!=cn.id){ym=null;}else{for(var dn=new ob(cn.a),nm=0;ib(dn.a);){var en=qb(dn);if(241==en.id){nm=tb(en);break;}}ym={Qb:bn,Kb:nm};}}if(ym){var fn=vm*ym.Qb,gn=um+ym.Kb;if(0<=tm){var hn=new ih(hm,gm,km,gn-1);em.push(new vh(tm,fn,hn));}tm=fn;km=gn;}}}0<=tm&&(hn=new ih(hm,gm,km,null),em.push(new vh(tm,null,hn)));im=em;}}else im=null;}catch(jm){if(!(jm instanceof RangeError))throw jm;}return im;};function ij(em,fm,gm,hm,im,jm,km,lm){this.h=em;this.j=fm;this.f=gm;this.a=hm;this.g=im;this.b=jm;this.l=km;this.c=null;this.i=lm;}ij.prototype.destroy=function(){this.i=this.j=this.h=null;this.a.f();this.a=null;this.b&&(this.b.f(),this.b=null);this.g&&(this.g.f(),this.g=null);this.c=null;};ij.prototype.create=function(){if("webm"==this.f){var em=Error("WebM is not supported in this build configuration.");em.type="app";return Promise.reject(em);}if(this.c)return this.c;em=[lh(this.a)];"webm"==this.f&&em.push(lh(this.g));this.b&&lh(this.b);return this.c=Promise.all(em).then(dd(this,function(fm){var gm=fm[0];fm=fm[1]||null;var hm=null;"mp4"==this.f?(hm=new zh(),hm=hm.parse(new DataView(gm),this.a.h,this.a.b,this.i,this.b)):"webm"==this.f&&(hm=new hj(),hm=hm.parse(new DataView(gm),new DataView(fm),this.a.b,this.i));if(!hm)return gm=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),gm.type="stream",Promise.reject(gm);var im;"dynamic"==this.h.type?im=new di(hm,this.h,this.j,this.l):im=new ai(hm);return Promise.resolve(im);}));};function jj(em){this.a=em;}function kj(em,fm,gm){for(var hm=eb()/1000,im=0;im<fm.a.length;++im)for(var jm=fm.a[im],km=0;km<jm.b.length;++km){var lm=jm.b[km];if("text"!=lm.contentType)for(var mm=0;mm<lm.a.length;++mm){var nm=lm.a[mm],om=0,om=om+(nm.g?1:0),om=om+(nm.b?1:0),om=om+(nm.a?1:0);0==om?(lm.a.splice(mm,1),--mm):1!=om&&(nm.g?(nm.b=null,nm.a=null):nm.b&&(nm.a=null));}}lj(fm);for(im=0;im<fm.a.length;++im)for(jm=fm.a[im],km=0;km<jm.b.length;++km){mm=lm=jm.b[km];nm=null;for(om=0;om<mm.a.length;++om){var pm=mm.a[om].f||"";nm?pm!=nm&&(mm.a.splice(om,1),--om):nm=pm;}0==lm.a.length&&(jm.b.splice(km,1),--km);}"dynamic"==fm.type&&null==fm.c&&(fm.c=hm);im=new ui();"dynamic"==fm.type&&(im.b=true,im.f=fm.g,im.g=new ih(gm,fm.j||fm.url),im.h=fm.c);im.c=fm.h||5;for(jm=0;jm<fm.a.length;++jm){km=fm.a[jm];if(null==km.start)break;km=mj(em,fm,km,hm,gm);im.a.push(km);}return im;}function lj(em){if(em.a.length){null==em.a[0].start&&(em.a[0].start=0);var fm=function(mm){return 0==mm||!!mm;};"dynamic"==em.type&&(em.b=null);fm(em.b)&&1==em.a.length&&!fm(em.a[0].a)&&(em.a[0].a=em.b);for(var gm=0,hm=true,im=0;im<em.a.length;++im){var jm=em.a[im-1],km=em.a[im],lm=em.a[im+1]||{start:em.b};!fm(km.start)&&jm&&fm(jm.start)&&fm(jm.a)&&(km.start=jm.start+jm.a);!fm(km.a)&&fm(lm.start)&&(km.a=lm.start-km.start);null!=km.start&&null!=km.a?gm+=km.a:hm=false;}fm(em.b)||(im=em.a[em.a.length-1],hm?em.b=gm:fm(im.start)&&fm(im.a)?em.b=im.start+im.a:"dynamic"!=em.type&&(em.b=gm));}}function mj(em,fm,gm,hm,im){var jm=new ti();jm.id=gm.id;jm.start=gm.start;jm.b=gm.a;var km=new kc();gm.b.forEach(function(um){km.push(um.contentType||"",um);});for(var lm=nc(km),mm=0;mm<lm.length;++mm){var nm=new kc();km.get(lm[mm]).forEach(function(um){nm.push(um.group,um);});for(var om=nc(nm),pm=0;pm<om.length;++pm){var qm=new kc();nm.get(om[pm]).forEach(function(um){qm.push(um.lang,um);});for(var rm=nc(qm),sm=0;sm<rm.length;++sm){var tm=qm.get(rm[sm]),tm=nj(em,fm,gm,tm,hm,im);jm.a.push(tm);}}}return jm;}function nj(em,fm,gm,hm,im,jm){n(hm.every(function(sm){return sm.group==hm[0].group&&(sm.lang||"")==(hm[0].lang||"")&&(sm.contentType||"")==(hm[0].contentType||"");}));var km=new qi(),lm=hm.filter(function(sm){return null!=sm.id;});lm.length==hm.length&&(km.id=lm.map(function(sm){return sm.id;}).sort().reduce(function(sm,tm){return sm+","+tm;}));km.lang=hm[0].lang||"";km.contentType=hm[0].contentType||"";km.b=hm.some(function(sm){return sm.c;});for(var lm={},mm=0;mm<hm.length;++mm)for(var nm=hm[mm],om=0;om<nm.a.length;++om){var pm=nm.a[om],qm=qj(em,pm),rm=km.a.slice(0);pj(qm,rm);0==rm.length&&0<km.a.length||!(pm=sj(fm,gm,pm,im,jm))||(km.o.push(pm),km.a=rm,lm[pm.C]=nm);}if(km.a.some(function(sm){return ""==sm.a;}))return km.o.forEach(function(sm){sm.O=true;}),km;em=oj(hm);for(mm=0;mm<km.o.length;++mm)pm=km.o[mm],nm=lm[pm.C],nm==em&&(pm.O=true);return km;}function oj(em){for(var fm=null,gm=null,hm=0;hm<em.length;++hm)for(var im=em[hm],jm=0;jm<im.a.length;++jm){var km=im.a[jm],km=(km.width||1)*(km.height||1)*(km.bandwidth||1);if(null==fm||km<fm)fm=km,gm=im;}return gm;}function pj(em,fm){if(0==fm.length){Array.prototype.push.apply(fm,em);}else for(var gm=0;gm<fm.length;++gm){for(var hm=false,im=0;im<em.length;++im){var jm=fm[gm],km=em[im];if(jm.a==km.a&&jm.h==km.h&&jm.l==km.l&&jm.g==km.g&&jm.i==km.i&&jm.f==km.f&&jm.j==km.j&&ud(jm.c,km.c)){hm=true;xd(fm[gm],em[im].b);break;}}hm||(fm.splice(gm,1),--gm);}}function qj(em,fm){var gm=[];if(0==fm.c.length){gm.push(new vd());}else if(em.a)for(var hm=0;hm<fm.c.length;++hm)gm.push.apply(gm,rj(em,fm.c[hm]));return gm;}function rj(em,fm){var gm=[];if(2!=em.a.length)return [];var hm=em.a(fm.c||"",fm.f);if(!(hm&&hm instanceof Array))return [];for(var im=0;im<hm.length;++im){var jm,km=hm[im];jm=new vd();if(km){var lm=hc(km,"keySystem");if(null!=lm){jm.a=lm;}else throw Error("'keySystem' cannot be null.");var mm=hc(km,"licenseServerUrl");if(null!=mm){jm.h=mm;}else if(lm)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");lm=fc(km,"withCredentials");null!=lm&&(jm.l=lm);lm=jc(km,"licensePostProcessor",Function);null!=lm&&(jm.m=lm);lm=jc(km,"licensePreProcessor",Function);null!=lm&&(jm.s=lm);lm=fc(km,"distinctiveIdentifierRequired");null!=lm&&(jm.g=lm);lm=fc(km,"persistentStateRequired");null!=lm&&(jm.i=lm);lm=hc(km,"audioRobustness");null!=lm&&(jm.f=lm);lm=hc(km,"videoRobustness");null!=lm&&(jm.j=lm);lm=jc(km,"serverCertificate",Uint8Array);null!=lm&&(jm.c=lm);if(lm=jc(km,"initData",Object)){km=jc(lm,"initData",Uint8Array);if(null==km)throw Error("'initData.initData' cannot be null.");lm=hc(lm,"initDataType");if(null==lm)throw Error("'initData.initDataType' cannot be null.");jm.b.push({initData:new Uint8Array(km.buffer),initDataType:lm});}}0==jm.b.length&&fm.a&&fm.a.psshBox&&xd(jm,[{initData:fm.a.psshBox,initDataType:"cenc"}]);gm.push(jm);}return gm;}function sj(em,fm,gm,hm,im){if(!gm.u||0===gm.u.length)return null;var jm=null,km=1,lm=0;if(gm.g){jm=gm.f.split("/")[1];if("mp4"!=jm&&"webm"!=jm){jm=null;}else{var mm=gm.g;"webm"!=jm||mm.c?mm.a||mm.b&&mm.b.a?(km=mm.b,km||(km=new ag(),km.url=gm.u,km.a=mm.a?mm.a.clone():null),lm=uj(km,im),km=mm.c?uj(mm.c,im):null,mm.f?(mm=mm.f,mm=new ih(im,gm.u,mm.fa,mm.end)):mm=null,em=new ij(em,fm,jm,lm,km,mm,hm,im),fm=new uh(km),hm=new ni(),hm.J=em,hm.K=fm,jm=hm):jm=null:jm=null;}km=gm.g.h;lm=gm.g.g;}else if(gm.b){jm=gm.b,!jm.c&&!jm.f&&1<jm.b.length?jm=null:jm.c||fm.a||jm.f||1!=jm.b.length?jm.f&&0===jm.f.a.length?jm=null:(jm=jm.h?uj(jm.h,im):null,em=new li(em,fm,gm,hm,im),fm=new uh(jm),hm=new ni(),hm.J=em,hm.K=fm,jm=hm):jm=null,km=gm.b.a,lm=gm.b.g;}else if(gm.a){em:if(jm=gm.a,km=0+(jm.f?1:0),km+=jm.c?1:0,km+=jm.b?1:0,0==km?km=false:(1!=km&&(jm.f?(jm.c=null,jm.b=null):jm.c&&(jm.b=null)),km=true),km){km=null;if(jm.g&&(km=(jm=gm.a.g)?tj(gm,jm,bg):null,!km)){jm=null;break em;}jm=km?uj(km,im):null;km=gm.a;km.f?(km=gm.f.split("/")[1],"mp4"!=km&&"webm"!=km?em=null:"webm"!=km||jm?rh(im,gm,1,0)?(lm=(lm=gm.a.f)?tj(gm,lm,ag):null)?(lm=uj(lm,im),em=new ij(em,fm,km,lm,jm,null,hm,im)):em=null:em=null:em=null):em=km.h?km.c?new mi(em,fm,gm,hm,im):km.b?"dynamic"!=em.type&&null==fm.a?null:new ki(em,fm,gm,hm,im):null:null;em?(fm=new uh(jm),hm=new ni(),hm.J=em,hm.K=fm,jm=hm):jm=null;}else jm=null;;km=gm.a.a;lm=gm.a.i;}else "text"==gm.f.split("/")[0]&&(jm=new ni(),jm.J=new fj(new ih(im,gm.u)));if(!jm)return null;jm.id=gm.id;lm&&(jm.b=-1*lm/km);jm.bandwidth=gm.bandwidth;jm.width=gm.width;jm.height=gm.height;jm.a=gm.f||"";jm.c=gm.h||"";jm.fbQualityLabel=gm.fbQualityLabel||null;jm.fbQualityClass=gm.fbQualityClass||null;for(em=0;em<gm.c.length;++em)fm=gm.c[em],fm.b&&jm.f.push(fm.b);return jm;}function tj(em,fm,gm){fm=sh(fm,em.id,null,em.bandwidth,null);if(!fm)return null;gm=new gm();gm.url=kh(em.u,fm);return gm;}function uj(em,fm){var gm=em.url,hm=0,im=null;em.a&&(hm=em.a.fa,im=em.a.end);return new ih(fm,gm,hm,im);}function vj(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function wj(em,fm){var gm=new xj(fm);em.streamHistory.push(new yj(gm));if(gm.videoHeight||!em.streamStats)em.streamStats=gm;}function xj(em){this.videoWidth=em.width;this.videoHeight=em.height;this.videoMimeType=em.a;this.videoBandwidth=em.bandwidth;}function yj(em){this.timestamp=eb()/1000;this.value=em;}function zj(em,fm,gm,hm,im){this.b=new ih(null,[new ze(em)]);this.a=new bh();this.a.body=fm;this.a.method=gm;this.a.a=3;this.a.l=hm;this.a.c=0;em=im||{};for(var jm in em)this.a.b[jm]=em[jm];}function ak(em){return lh(em.b,em.a).then(function(fm){return Promise.resolve(new Uint8Array(fm));});}function bk(em,fm,gm){sc.call(this,em);this.c=fm;this.j=gm;this.a=this.h=null;this.i=new oc();this.b=[];this.f=[];this.m=0;this.g=new xc();this.l=null;}m(bk,sc);bk.prototype.destroy=function(){this.S=null;for(var em=0;em<this.f.length;++em)this.f[em].close().catch(function(){});this.f=[];this.b=this.a=this.h=null;this.g.destroy();this.g=null;this.i.destroy();this.i=null;this.l&&(i.clearTimeout(this.l),this.l=null);this.c=this.j=null;};bk.prototype.initialize=function(){var em=new kc(),fm;fm=this.j;if(fm.D){fm=fm.a.a[0];for(var gm=[],hm=0;hm<fm.a.length;++hm)gm.push.apply(gm,si(fm.a[hm]));fm=gm;}else fm=[];for(gm=0;gm<fm.length;++gm)hm=fm[gm],hm.a.a||hm.b&&!jk(hm.b)||em.push(hm.contentType,hm);for(var gm={},hm=false,im=0;im<fm.length;++im){var jm=fm[im];if(jm.a.a&&!em.a.hasOwnProperty(jm.contentType)){var km=jm.a.a,lm=gm[km];lm||(lm=jm.a,lm={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:lm.g?"required":"optional",persistentState:lm.i?"required":"optional",sessionTypes:["temporary"]},gm[km]=lm);if(jm.b&&(km=jm.contentType+"Capabilities",km in lm)){hm=true;lm[km]||(lm[km]=[]);var mm;"audio"==jm.contentType?mm=jm.a.f:"video"==jm.contentType&&(mm=jm.a.j);lm[km].push({contentType:jm.b,robustness:mm});}}}if(!hm)if(fm.length){this.a=fm[0].a;}else throw em=Error("No DrmInfo exists!"),em.type="drm",em;if(0==Object.keys(gm).length)return hl(this.j,em),this.g.resolve(),Promise.resolve();mm=new xc();gm=ck(gm,mm);gm=gm.then(this.v.bind(this,fm,em));mm.reject(null);return gm;};function ck(em,fm){for(var gm in em)fm=fm.catch(function(hm,im){return navigator.requestMediaKeySystemAccess(hm,[im]);}.bind(null,gm,em[gm]));return fm;}bk.prototype.v=function(em,fm,gm){if(!this.c)return ek();for(var hm=gm.keySystem,im=gm.getConfiguration(),jm=["audio","video"],km=0;km<jm.length;++km){var lm=jm[km];if(!fm.a.hasOwnProperty(lm)){var mm=im[lm+"Capabilities"];if(mm){for(var mm=mm[0],nm=[],om={},pm=0;pm<em.length;++pm){var qm=em[pm],rm=mm?qm.b==mm.contentType:qm.contentType==lm;qm.a.a!=hm||!rm||qm.id in om||(nm.push(qm),om[qm.id]=true,this.a=this.a?wd(this.a,qm.a):qm.a);}fm.set(lm,nm);}}}hl(this.j,fm);return gm.createMediaKeys().then(function(sm){this.h=sm;}.bind(this));};function dk(em){return em.c?em.h?em.c.setMediaKeys(em.h).then(dd(em,function(){return this.c?this.a.c?this.h.setServerCertificate(this.a.c):Promise.resolve():ek();})).then(dd(em,function(){if(!this.c)return ek();for(var fm=0;fm<this.a.b.length;++fm){var gm=this.a.b[fm];this.s({type:"encrypted",initDataType:gm.initDataType,initData:gm.initData});}0==this.a.b.length&&pc(this.i,this.c,"encrypted",this.s.bind(this));})):Promise.resolve():ek();}function ek(){var em=Error("EmeManager destroyed");em.type="destroy";return Promise.reject(em);}bk.prototype.s=function(em){for(var fm=new Uint8Array(em.initData),gm=0;gm<this.b.length;++gm)if(ud(fm,this.b[gm].data))return;try{var im=fk(this);}catch(hm){fm=yb(hm);this.dispatchEvent(fm);this.g.reject(hm);return;}em=im.generateRequest(em.initDataType,em.initData);this.b.push({data:fm,Ha:im});em.catch(dd(this,function(jm){if(this.c){for(var km=0;km<this.b.length;++km)if(this.b[km].Ha==im){this.b.splice(km,1);break;}km=yb(jm);this.dispatchEvent(km);this.g.reject(jm);}}));this.f.push(im);};function fk(em){var fm=null,fm=em.h.createSession();pc(em.i,fm,"message",em.B.bind(em));pc(em.i,fm,"keystatuseschange",em.A.bind(em));return fm;}bk.prototype.B=function(em){gk(this,em.target,this.a,em.message);};bk.prototype.A=function(em){em=em.target;var fm={};em.keyStatuses.forEach(function(hm,im){if("string"==typeof hm){var jm=hm;hm=im;im=jm;}if("com.microsoft.playready"==this.a.a&&16==hm.byteLength){var jm=new DataView(hm),km=jm.getUint32(0,true),lm=jm.getUint16(4,true),mm=jm.getUint16(6,true);jm.setUint32(0,km,false);jm.setUint16(4,lm,false);jm.setUint16(6,mm,false);}jm=td(new Uint8Array(hm));fm[jm]=im;}.bind(this));if(em.expiration<Date.now()){for(var gm=0;gm<this.b.length;++gm)if(this.b[gm].Ha==em){this.b.splice(gm,1);break;}em.close();this.f.splice(this.f.indexOf(em),1);}kl(this.j,fm);};function gk(em,fm,gm,hm){hm=hk(gm,hm);ak(new zj(hm.url,hm.body,hm.method,gm.l,hm.headers)).then(dd(em,function(im){gm.m&&(im=gm.m(im));return fm.update(im);})).then(dd(em,function(){var im=xb({type:"sessionReady",detail:fm});this.dispatchEvent(im);this.m++;this.m>=this.f.length&&this.g.resolve();})).catch(dd(em,function(im){im.Ha=fm;im=yb(im);this.dispatchEvent(im);}));}function hk(em,fm){var gm={url:em.h,body:fm.slice(0),method:"POST",headers:{}};if("com.microsoft.playready"===em.a){for(var hm=String.fromCharCode.apply(null,new Uint16Array(gm.body)),hm=(new DOMParser()).parseFromString(hm,"application/xml"),im=hm.getElementsByTagName("name"),jm=hm.getElementsByTagName("value"),km=0;km<im.length;km++)gm.headers[im[km].childNodes[0].nodeValue]=jm[km].childNodes[0].nodeValue;gm.body=i.atob(hm.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue);}if(!em.s)return gm;em.s(gm);gm.url=hc(gm,"url");if(null==gm.url)throw Error("'url' cannot be null.");if(!(gm.body instanceof ArrayBuffer||"string"==typeof gm.body||null==gm.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");gm.method=hc(gm,"method");if("GET"!=gm.method&&"POST"!=gm.method)throw Error("'method' must be either 'GET' or 'POST'.");gm.headers=jc(gm,"headers",Object);if(null==gm.headers)throw Error("'headers' cannot be null.");return gm;}function ik(em){sc.call(this,null);this.a=em;this.b=null;this.f=new oc();this.i=this.h=null;this.B=0;this.v=null;this.j=false;this.F=this.G=true;this.g=new vj();this.c={enableAdaptation:true,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new v()};this.l=1;this.D=null;this.s=false;}m(ik,sc);l("shaka.player.Player",ik);ik.version="v1.6.4-fb";ik.isBrowserSupported=function(){return !!i.MediaSource&&!!i.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!i.Uint8Array;};ik.prototype.U=function(em){this.G=em;};ik.prototype.setResumeAfterBuffering=ik.prototype.U;function jk(em){return "text/vtt"==em?!!i.VTTCue:MediaSource.isTypeSupported(em);}ik.isTypeSupported=jk;ik.setTextStyle=function(em){var fm=document.getElementById("ShakaPlayerTextStyle");fm||(fm=document.createElement("style"),fm.id="ShakaPlayerTextStyle",document.head.appendChild(fm));for(fm=fm.sheet;fm.cssRules.length;)fm.deleteRule(0);fm.insertRule("::cue { "+x(em)+" }",0);};ik.prototype.destroy=function(){return this.m().then(dd(this,function(){this.f.destroy();this.a=this.f=null;})).catch(function(){});};ik.prototype.destroy=ik.prototype.destroy;ik.prototype.m=function(){if(!this.b)return Promise.resolve();this.j&&pk(this);this.a.pause();qc(this.f);ok(this);mk(this);this.h&&(this.h.destroy(),this.h=null);this.a.src="";var em=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.j=false;this.g=new vj();return em;};ik.prototype.unload=ik.prototype.m;ik.prototype.la=function(em){return kk(this,em,false);};ik.prototype.load=ik.prototype.la;ik.prototype.M=function(em){return kk(this,em,true);};ik.prototype.loadWithSilencedErrors=ik.prototype.M;function kk(em,fm,gm){cl(fm,em.a);var hm=em.m();em.a.autoplay&&(p("load"),pc(em.f,em.a,"timeupdate",em.ub.bind(em)));fm.Za(em.c);fm.N=em.D;em.D=null;hm=hm.then(dd(em,function(){return fm.Ja();}));hm.catch(dd(em,function(im){fm.destroy();return Promise.reject(im);}));return hm.then(dd(em,function(){if(!this.a)return lk();this.b=fm;pc(this.f,this.b,"seekrangechanged",this.Bb.bind(this));this.h=new bk(this,this.a,this.b);return this.h.initialize();})).then(dd(em,function(){if(!this.a)return lk();pc(this.f,this.a,"error",this.Nb.bind(this));pc(this.f,this.a,"playing",this.Ab.bind(this));pc(this.f,this.a,"pause",this.zb.bind(this));return dl(this.b,this,this.a);})).then(dd(em,function(){return this.a?dk(this.h):lk();})).then(dd(em,function(){if(!this.a)return lk();nk(this);})).catch(dd(em,function(im){if(!this.a)return lk();if(true!==gm&&"destroy"!=im.type){var jm=yb(im);this.dispatchEvent(jm);}return this.m().then(function(){return Promise.reject(im);});}));}function lk(){var em=Error("Player destroyed");em.type="destroy";return Promise.reject(em);}j=ik.prototype;j.ub=function(){q("load");this.g.playbackLatency=r("load")/1000;this.f.ra(this.a,"timeupdate");};j.Nb=function(){if(this.a.error){var em=this.a.error.code;em!=MediaError.MEDIA_ERR_ABORTED&&(em=Error(qk[em]||"Unknown playback error."),em.type="playback",em=yb(em),this.dispatchEvent(em));}};j.Ab=function(){p("playing");!this.i&&0>this.l&&(this.a.playbackRate=0,this.A(this.a.currentTime,Date.now(),this.l));this.j&&!this.F&&pk(this);};j.zb=function(){q("playing");var em=r("playing");if(!isNaN(em)){var fm=this.g;fm.playTime+=em/1000;}mk(this);};j.Bb=function(em){this.B=em.start;};j.kb=function(){if(!this.a.paused){q("playing");var em=r("playing");if(!isNaN(em)){var fm=this.g;fm.playTime+=em/1000;p("playing");}}em=this.g;fm=this.a;fm.getVideoPlaybackQuality&&(fm=fm.getVideoPlaybackQuality(),em.decodedFrames=fm.totalVideoFrames,em.droppedFrames=fm.droppedVideoFrames);return this.g;};ik.prototype.getStats=ik.prototype.kb;ik.prototype.ka=function(){return this.b?this.b.M():[];};ik.prototype.getVideoTracks=ik.prototype.ka;ik.prototype.ca=function(){return this.b?this.b.ba():[];};ik.prototype.getAudioTracks=ik.prototype.ca;ik.prototype.ea=function(){return this.b?this.b.$a():[];};ik.prototype.getTextTracks=ik.prototype.ea;ik.prototype.selectVideoTrack=function(em,fm){return this.b?this.b.selectVideoTrack(em,void 0==fm?true:fm):false;};ik.prototype.selectVideoTrack=ik.prototype.selectVideoTrack;ik.prototype.ma=function(em,fm,gm){return this.b?ml(this.b,"audio",em,void 0==fm?true:fm,gm):false;};ik.prototype.selectAudioTrack=ik.prototype.ma;ik.prototype.na=function(em){return this.b?ml(this.b,"text",em,false):false;};ik.prototype.selectTextTrack=ik.prototype.na;ik.prototype.ba=function(em){this.b&&il(this.b,em);};ik.prototype.enableTextTrack=ik.prototype.ba;ik.prototype.T=function(em){mk(this);0<=em?this.a.playbackRate=em:this.a.paused||(this.a.playbackRate=0,this.A(this.a.currentTime,Date.now(),em));this.l=em;};ik.prototype.setPlaybackRate=ik.prototype.T;ik.prototype.L=function(){return this.l;};ik.prototype.getPlaybackRate=ik.prototype.L;ik.prototype.oa=function(em){this.D=em;};ik.prototype.setPlaybackStartTime=ik.prototype.oa;ik.prototype.I=function(){return this.b?this.b.ab():false;};ik.prototype.isLive=ik.prototype.I;ik.prototype.aa=function(em){if(em){var fm=fc(em,"enableAdaptation");null!=fm&&(this.c.enableAdaptation=fm);fm=fc(em,"endBufferingOnPlaying");null!=fm&&(this.F=fm);fm=fc(em,"usePlaybackRateForBuffering");null!=fm&&(this.s=fm);fm=gc(em,"streamBufferSize",0);null!=fm&&(this.c.streamBufferSize=fm);fm=fc(em,"addCdnDebugQueryParameters");null!=fm&&(this.c.addCdnDebugQueryParameters=fm);fm=gc(em,"initialStreamBufferSize",0);null!=fm&&(this.c.initialStreamBufferSize=fm);fm=fc(em,"includeStreamBufferSizeInStartOffset");null!=fm&&(this.c.includeStreamBufferSizeInStartOffset=fm);fm=gc(em,"liveStreamEndTimeout",0);null!=fm&&(this.c.liveStreamEndTimeout=fm);fm=gc(em,"licenseRequestTimeout",0);null!=fm&&(this.c.licenseRequestTimeout=fm);fm=gc(em,"mpdRequestTimeout",0);null!=fm&&(this.c.mpdRequestTimeout=fm);fm=gc(em,"minMpdRefreshInterval",0);null!=fm&&(this.c.minMpdRefreshInterval=fm);fm=fc(em,"enableLiveInterruptionDetection");null!=fm&&(this.c.enableLiveInterruptionDetection=fm);fm=fc(em,"resolveVideoTimeUpdateOnFragmentedTimeRanges");null!=fm&&(this.c.resolveVideoTimeUpdateOnFragmentedTimeRanges=fm);fm=gc(em,"liveInterruptionConsecutiveUpdatesWithoutChange");null!=fm&&(this.c.liveInterruptionConsecutiveUpdatesWithoutChange=fm);fm=gc(em,"liveInterruptionConsecutiveUpdatesWithChange");null!=fm&&(this.c.liveInterruptionConsecutiveUpdatesWithChange=fm);fm=fc(em,"liveSendPushHeaders");null!=fm&&(this.c.liveSendPushHeaders=fm);fm=gc(em,"liveMaxSegmentsToPush");null!=fm&&(this.c.liveMaxSegmentsToPush=fm);fm=gc(em,"segmentRequestTimeout",0);null!=fm&&(this.c.segmentRequestTimeout=fm);fm=hc(em,"preferredLanguage");null!=fm&&(this.c.preferredLanguage=fm);fm=jc(em,"restrictions",v);null!=fm&&(this.c.restrictions=fm.clone());em=fc(em,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation");null!=em&&(ch=!em);this.b&&this.b.Za(this.c);}};ik.prototype.configure=ik.prototype.aa;ik.prototype.da=function(){return this.c;};ik.prototype.getConfiguration=ik.prototype.da;function mk(em){em.i&&(i.clearTimeout(em.i),em.i=null);}function nk(em){ok(em);em.v=i.setTimeout(em.N.bind(em),100);}function ok(em){em.v&&(i.clearTimeout(em.v),em.v=null);}ik.prototype.A=function(em,fm,gm){this.i=null;var hm=(Date.now()-fm)/1000*gm;this.a.currentTime<this.B+(this.I()?1:.05)?this.a.pause():(hm=Math.max(this.B,em+hm),this.a.currentTime=hm,this.i=i.setTimeout(this.A.bind(this,em,fm,gm),250));};function pk(em){q("buffering");var fm=em.g;fm.bufferingTime+=r("buffering")/1000;em.s&&(em.a.playbackRate=em.l);em.j=false;em.dispatchEvent(xb({type:"bufferingEnd"}));}ik.prototype.N=function(){nk(this);if(!this.a.ended&&!this.a.seeking){var em=this.a.buffered,fm=em.length?em.end(em.length-1):0,em=Math.max(fm-this.a.currentTime,0),gm=this.a.currentTime,hm=this.a.duration,hm=isNaN(hm)?0:Math.max(hm-.05,0),fm=fm>=hm||gm>=hm;if(this.j){if(fm=this.b,em>(fm.Ra?Number(fm.g.streamBufferSize):Number(fm.g.initialStreamBufferSize))||xl(this.b))pk(this),this.G&&!this.s&&this.a.play();}else !this.a.paused&&!fm&&.5>em&&(this.j=true,this.s?this.a.playbackRate=0:this.a.pause(),this.g.bufferingHistory.push(eb()/1000),p("buffering"),this.dispatchEvent(xb({type:"bufferingStart"}))),xl(this.b)&&pk(this);}};var qk={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function rk(em){for(var fm=0;fm<em.length;++fm)for(var gm=em[fm],hm=0;hm<gm.a.length;++hm){for(var im=gm.a[hm],jm=im,km=0;km<jm.o.length;++km)jk(pi(jm.o[km]))||(jm.o.splice(km,1),--km);0==im.o.length&&(gm.a.splice(hm,1),--hm);}for(fm=0;fm<em.length;++fm)for(gm=em[fm],hm=0;hm<gm.a.length;++hm)gm.a[hm].o.sort(sk);}function sk(em,fm){var gm=em.bandwidth||Number.MAX_VALUE,hm=fm.bandwidth||Number.MAX_VALUE;return gm<hm?-1:gm>hm?1:0;}function tk(em){this.a=em;}tk.prototype.destroy=function(){this.a.destroy();this.a=null;};tk.prototype.update=function(em){var fm=uk(em),gm=uk(this.a);return Promise.all([fm,gm]).then(dd(this,function(hm){var im=hm[0];hm=hm[1];rk(this.a.a);em.b&&!this.a.b&&(em.i=true);em.f=this.a.f;em.g=this.a.g?this.a.g.clone():null;em.c=this.a.c;var jm=[];vk(em,this.a,im,hm,jm);rk(em.a);return Promise.resolve(jm);}));};function uk(em){function fm(hm,im){return hm.concat(im);}var gm=em.a.map(function(hm){return hm.a;}).reduce(fm,[]).map(function(hm){return hm.o;}).reduce(fm,[]);em=gm.map(function(hm){return hm.J.create();});return Promise.all(em).then(function(hm){for(var im={},jm=0;jm<gm.length;++jm)im[gm[jm].C]=hm[jm];return Promise.resolve(im);});}function vk(em,fm,gm,hm,im){var jm=new kc();em.a.forEach(function(nm,om){jm.push(nm.id||""+om,nm);});var km=new kc();fm.a.forEach(function(nm,om){km.push(nm.id||""+om,nm);});em=nc(jm);for(fm=0;fm<em.length;++fm){var lm=em[fm],mm=jm.get(lm);1<mm.length||(lm=km.get(lm))&&0!=lm.length&&1==lm.length&&(wk(mm[0],lm[0],gm,hm,im),mm[0].b=lm[0].b);}}function wk(em,fm,gm,hm,im){var jm=new kc();em.a.forEach(function(nm,om){jm.push(nm.id||""+om,nm);});var km=new kc();fm.a.forEach(function(nm,om){km.push(nm.id||""+om,nm);});em=nc(jm);for(fm=0;fm<em.length;++fm){var lm=em[fm],mm=jm.get(lm);1<mm.length||(lm=km.get(lm))&&0!=lm.length&&1==lm.length&&xk(mm[0],lm[0],gm,hm,im);}}function xk(em,fm,gm,hm,im){var jm=new kc();em.o.forEach(function(pm,qm){jm.push(pm.id||""+qm,pm);});var km=new kc();fm.o.forEach(function(pm,qm){km.push(pm.id||""+qm,pm);});fm={};for(var lm=nc(jm),mm=0;mm<lm.length;++mm){var nm=lm[mm];fm[nm]=nm;var om=jm.get(nm);1<om.length||((nm=km.get(nm))&&0!=nm.length?1==nm.length&&(yk(om[0],nm[0],gm,hm),om[0].K=nm[0].K,nm[0].K=null,om[0].b=nm[0].b):(im.push(om[0]),em.o.splice(em.o.indexOf(om[0]),1)));}lm=nc(km);for(mm=0;mm<lm.length;++mm)nm=lm[mm],fm[nm]||(fm[nm]=nm,nm=km.get(nm),em.o.push(nm[0]));}function yk(em,fm,gm,hm){em=gm[em.C];hm=hm[fm.C];fm=em.length();em.Fa(hm)&&(hm=em.length(),em.j.push(fm!==hm),50<em.j.length&&em.j.shift());}function zk(){this.a=this.b=null;this.f=new oc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}l("shaka.media.SimpleAbrManager",zk);zk.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};zk.prototype.initialize=function(em,fm){this.b||this.a||(this.b=em,this.a=fm);};zk.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,pc(this.f,this.b,"bandwidth",this.l.bind(this)),pc(this.f,this.a,"adaptation",this.j.bind(this)),pc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};zk.prototype.enable=function(em){this.i=em;};zk.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var em=al(this);return em?em.id:null;};zk.prototype.getInitialSwitchReason=function(){return null;};zk.prototype.getInitialAudioTrackId=function(){return null;};zk.prototype.selectVideoTrack=function(em,fm,gm){this.g&&this.a.selectVideoTrack(em.id,fm,gm);};zk.prototype.l=function(){Date.now()<this.c||this.h();};zk.prototype.h=function(){if(this.i){var em=al(this);if(em){if(em.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(em,false);}this.c=Number.POSITIVE_INFINITY;}};zk.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function al(em){var fm=em.a.M();if(0==fm.length)return null;fm.sort(fa);var gm;em:{gm=em.a.ba();for(var hm=0;hm<gm.length;++hm)if(gm[hm].active){gm=gm[hm];break em;}gm=null;};gm=gm?gm.bandwidth:0;em=em.b.getBandwidth();for(var hm=fm[0],im=0;im<fm.length;++im){var jm=fm[im],km=im+1<fm.length?fm[im+1]:{bandwidth:Number.POSITIVE_INFINITY};if(jm.bandwidth&&(km=(km.bandwidth+gm)/.85,em>=(jm.bandwidth+gm)/.95&&em<=km&&(hm=jm,hm.active)))break;}return hm;}function bl(em,fm,gm){sc.call(this,null);this.a=em;this.da=fm;this.j=new oc();this.h=new MediaSource();this.f=null;this.xa=0;this.Qa=false;this.wa=0;this.oa=3;this.na=this.Ra=false;this.ma=Infinity;this.c=new kc();this.l=gm;this.l.initialize(fm,this);this.D=false;this.B="en";this.ea=false;this.G=null;this.v=new xc();this.cb=new xc();this.i=new v();this.A=null;this.Wa=1;this.b={};this.U=new xc();this.la=0;this.Va=15;this.s=null;this.Oa=this.Sa=false;this.m={};this.N=this.L=this.I=null;this.g={};this.ca=false;this.bb=null;}m(bl,sc);l("shaka.player.StreamVideoSource",bl);bl.prototype.Za=function(em){null!=em.streamBufferSize&&(this.g.streamBufferSize=em.streamBufferSize);null!=em.initialStreamBufferSize&&(this.g.initialStreamBufferSize=em.initialStreamBufferSize);null!=em.addCdnDebugQueryParameters&&(this.g.addCdnDebugQueryParameters=em.addCdnDebugQueryParameters);null!=em.segmentRequestTimeout&&(this.g.segmentRequestTimeout=em.segmentRequestTimeout);null!=em.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.g.resolveVideoTimeUpdateOnFragmentedTimeRanges=em.resolveVideoTimeUpdateOnFragmentedTimeRanges);cm(this);null!=em.includeStreamBufferSizeInStartOffset&&(this.Qa=Boolean(em.includeStreamBufferSizeInStartOffset));null!=em.enableAdaptation&&this.l.enable(Boolean(em.enableAdaptation));null!=em.mpdRequestTimeout&&(this.wa=Number(em.mpdRequestTimeout));null!=em.minMpdRefreshInterval&&(this.oa=Number(em.minMpdRefreshInterval)/1000);null!=em.liveStreamEndTimeout&&(this.Va=Number(em.liveStreamEndTimeout));null!=em.preferredLanguage&&(this.B=cc(String(em.preferredLanguage)));null!=em.liveSendPushHeaders&&(this.na=Boolean(em.liveSendPushHeaders));null!=em.liveMaxSegmentsToPush&&(this.ma=Number(em.liveMaxSegmentsToPush));null!=em.restrictions&&(this.i=em.restrictions,this.D&&jl(this));};bl.prototype.destroy=function(){this.v.destroy();this.U.destroy();this.U=this.v=null;this.L&&(i.clearTimeout(this.L),this.L=null);this.I&&(i.clearTimeout(this.I),this.I=null);this.m=null;this.j.destroy();this.j=null;ec(this.b).forEach(function(em){em.destroy();});this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);this.l.destroy();this.S=this.i=this.G=this.f=this.h=this.da=this.l=null;};function cl(em,fm){pc(em.j,em.h,"sourceopen",em.vb.bind(em));fm.src=i.URL.createObjectURL(em.h);}function dl(em,fm,gm){if(!em.D)return em=Error("Cannot call attach() right now."),em.type="app",Promise.reject(em);em.S=fm;em.f=gm;em.G=fm.kb();pc(em.j,em.da,"bandwidth",em.Ob.bind(em));em.a.b&&(pc(em.j,fm,"bufferingStart",em.tb.bind(em)),pc(em.j,fm,"bufferingEnd",em.sb.bind(em)));fm=em.f.setMediaKeys(em.f.mediaKeys);em.cb.then(dd(em,function(){ol(this).then(dd(this,function(){this.v&&this.v.resolve();})).catch(dd(this,function(hm){this.v&&this.v.reject(hm);}));}));return Promise.all([em.v,fm]);}j=bl.prototype;j.Ja=function(){if(this.D){var em=Error("Cannot call load() right now.");em.type="app";return Promise.reject(em);}if(!this.a||0==this.a.a.length)return em=Error("The manifest does not specify any content."),em.type="stream",Promise.reject(em);rk(this.a.a);if(0==this.a.a.length||0==this.a.a[0].a.length||!this.a.a[0].a.some(function(fm){return "video"===fm.contentType;}))return em=Error("The manifest specifies content that cannot be displayed on this browser/platform."),em.type="stream",Promise.reject(em);this.D=true;this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);cm(this);jl(this);return Promise.resolve();};function el(em){var fm=xb({type:"manifestwrapped",bubbles:true});em.dispatchEvent(fm);}j.gb=function(em){var fm=Date.now(),gm=this.I=null,hm,im;if(this.na){hm=Math.floor(zl(this))+1;hm=Math.min(hm,this.ma);var jm=this.b.video;if(jm=jm?jm.Ca():null)jm=jm.w(),null!=jm.c&&(im=jm.c);if(this.f.paused||this.ca)hm=0;}jm=this.a.g;(em?this.eb():this.fb(jm,hm,im)).then(dd(this,function(km){gm=new tk(km);return gm.update(this.a);})).then(dd(this,function(km){gm.destroy();gm=null;yl(this).some(function(mm){return mm.Ma;})&&el(this);var lm=am(this,yl(this));lm&&this.f.paused&&lm.end>this.f.currentTime+10&&(this.f.currentTime=lm.end);if(xl(this))return this.sa();for(lm=0;lm<km.length;++lm)gl(this,km[lm]);this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);this.g.useInitialBufferSizeWhenPaused=this.a.b;cm(this);jl(this);0==Object.keys(this.b).length?ol(this):fl(this,(Date.now()-fm)/1000);})).catch(dd(this,function(km){gm&&(gm.destroy(),gm=null);"aborted"!=km.type&&(km=yb(km),this.dispatchEvent(km),this.a&&fl(this,0));}));};j.fb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};j.eb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};function fl(em,fm){if(null!=em.a.f){var gm=Math.max(em.a.f,em.oa),gm=Math.max(gm-fm,0);em.I=i.setTimeout(em.gb.bind(em,false),1000*gm);}}function gl(em,fm){var gm=fm.a.split("/")[0],hm=em.b[gm];if(hm&&hm.pa()==fm){var im=em.c.get(fm.a.split("/")[0]).map(function(jm){return jm.o;}).reduce(function(jm,km){return jm.concat(km);},[]).filter(function(jm){return jm.O&&jm.H;});if(0==im.length){gm=Error("All usable streams have been removed from the manifest.");gm.type="app";gm=yb(gm);em.dispatchEvent(gm);return;}em.m[gm].Ka==fm&&delete em.m[gm];hm.qa(im[0],true);fm.destroy();}fm.destroy();}j.Mb=function(em){this.bb=em;};bl.prototype.setTaggedTimeRangesEntryAdder=bl.prototype.Mb;bl.prototype.M=function(){if(!this.c.a.hasOwnProperty("video"))return [];for(var em=this.b.video,em=(em=em?em.pa():null)?em.C:0,fm=[],gm=this.c.get("video"),hm=0;hm<gm.length;++hm)for(var im=gm[hm],jm=0;jm<im.o.length;++jm){var km=im.o[jm];if(km.O&&km.H){var lm=km.C,km=new ea(lm,km.bandwidth,km.width,km.height,km.id,km.fbQualityLabel,km.fbQualityClass);lm==em&&(km.active=true);fm.push(km);}}return fm;};bl.prototype.getVideoTracks=bl.prototype.M;bl.prototype.ba=function(){if(!this.c.a.hasOwnProperty("audio"))return [];for(var em=this.b.audio,em=(em=em?em.pa():null)?em.C:0,fm=[],gm=this.c.get("audio"),hm=0;hm<gm.length;++hm)for(var im=gm[hm],jm=im.lang,km=0;km<im.o.length;++km){var lm=im.o[km];if(lm.O&&lm.H){var mm=lm.C,lm=new u(mm,lm.bandwidth,jm,lm.id);mm==em&&(lm.active=true);fm.push(lm);}}return fm;};bl.prototype.getAudioTracks=bl.prototype.ba;bl.prototype.$a=function(){if(!this.c.a.hasOwnProperty("text"))return [];for(var em=this.b.text,fm=em?em.pa():null,fm=fm?fm.C:0,gm=[],hm=this.c.get("text"),im=0;im<hm.length;++im)for(var jm=hm[im],km=jm.lang,lm=0;lm<jm.o.length;++lm){var mm=jm.o[lm].C,nm=new da(mm,km);mm==fm&&(nm.active=true,nm.enabled=em.za());gm.push(nm);}return gm;};bl.prototype.getTextTracks=bl.prototype.$a;function hl(em,fm){if(em.D){for(var gm={},hm=em.a.a[0],im=0;im<hm.a.length;++im){var jm=hm.a[im];gm[jm.C]=jm;}em.c.a={};hm=nc(fm);for(im=0;im<hm.length;++im){var jm=hm[im],km=fm.get(jm);if("video"==jm){var lm=km[0].id;em.c.push(jm,gm[lm]);}else if("audio"==jm){for(var lm=km[0].b.split(";")[0],mm=0;mm<km.length;++mm){var nm=km[mm];nm.b.split(";")[0]==lm&&em.c.push(jm,gm[nm.id]);}}else for(mm=0;mm<km.length;++mm)lm=km[mm].id,em.c.push(jm,gm[lm]);}em.ea=true;if(gm=em.c.get("audio"))nl(em,gm),em.c.set("audio",gm),gm=gm[0].lang||em.B,zb(2,em.B,gm)&&(em.ea=false);if(gm=em.c.get("text"))nl(em,gm),em.c.set("text",gm),gm=gm[0].lang||em.B,zb(2,em.B,gm)||(em.ea=false);}}bl.prototype.selectVideoTrack=function(em,fm,gm,hm){return ml(this,"video",em,fm,gm,hm);};function il(em,fm){var gm=em.b.text;gm&&gm.ta(fm);}function jl(em){if(em.i){for(var fm=false,gm=0;gm<em.a.a.length;++gm)for(var hm=em.a.a[gm],im=0;im<hm.a.length;++im){var jm=hm.a[im];if("video"==jm.contentType)for(var km=0;km<jm.o.length;++km){var lm=jm.o[km],mm=lm.H;lm.H=true;em.i.maxWidth&&lm.width>em.i.maxWidth&&(lm.H=false);em.i.maxHeight&&lm.height>em.i.maxHeight&&(lm.H=false);em.i.minHeight&&lm.height<em.i.minHeight&&(lm.H=false);em.i.maxBandwidth&&lm.bandwidth>em.i.maxBandwidth&&(lm.H=false);em.i.minBandwidth&&lm.bandwidth<em.i.minBandwidth&&(lm.H=false);mm!=lm.H&&(fm=true);}}0!=lc(em.c).length&&fm&&(ll(em),0<em.M().length||(fm=Error("The application has restricted all video tracks!"),fm.type="app",fm=yb(fm),em.dispatchEvent(fm)));}}bl.prototype.ab=function(){return this.a?this.a.b:false;};bl.prototype.isLive=bl.prototype.ab;bl.prototype.ob=function(em){this.Ra=em;};bl.prototype.setIsLiveInterrupted=bl.prototype.ob;function kl(em,fm){for(var gm,hm=false,im=new kc(),jm=lc(em.c),km=0;km<jm.length;++km)for(var lm=jm[km],mm=0;mm<lm.o.length;++mm){var nm=lm.o[mm];nm.f.forEach(function(om){im.push(om,nm);});}for(gm in fm)if(jm=ub[fm[gm]]||null,lm=im.get(gm)){for(km=0;km<lm.length;++km)nm=lm[km],mm=nm.O,nm.O=!jm,mm!=nm.O&&(hm=true);}else yc(gm);hm&&(ll(em),hm=em.ba(),gm=em.M(),hm=em.c.a.hasOwnProperty("audio")&&0==hm.length,gm=em.c.a.hasOwnProperty("video")&&0==gm.length,hm||gm)&&(gm=Error("The key system has restricted all "+(hm&&gm?"audio and video tracks.":hm?"audio tracks.":"video tracks.")),gm.type="drm",gm=yb(gm),em.dispatchEvent(gm));}function ll(em){var fm=xb({type:"trackschanged",bubbles:true});em.dispatchEvent(fm);}function ml(em,fm,gm,hm,im,jm){if(!em.c.a.hasOwnProperty(fm)||!em.b[fm])return false;for(var km=em.c.get(fm),lm=0;lm<km.length;++lm)for(var mm=km[lm],nm=0;nm<mm.o.length;++nm){var om=mm.o[nm];if(om.C==gm){if(!om.O||!om.H)return false;if("text"!=fm&&!em.Oa)return gm=em.m[fm],em.m[fm]={Ka:om,Ta:null!=gm&&gm.Ta||hm,Ua:null!=gm&&gm.Ua||im,switchReason:jm},true;wj(em.G,om);em.b[fm].qa(om,hm,im,jm);return true;}}return false;}function nl(em,fm){for(var gm=0;2>=gm;++gm)for(var hm=0;hm<fm.length;++hm){var im=fm[hm];if(zb(gm,em.B,im.lang)){fm.splice(hm,1);fm.splice(0,0,im);return;}}for(hm=0;hm<fm.length;++hm)if(im=fm[hm],im.b){fm.splice(hm,1);fm.splice(0,0,im);break;}}j=bl.prototype;j.vb=function(){this.j.ra(this.h,"sourceopen");this.cb.resolve();};function ol(em){for(var fm=[],gm=["audio","video","text"],hm=0;hm<gm.length;++hm){var im=gm[hm];em.c.a.hasOwnProperty(im)&&fm.push(em.c.get(im)[0]);}for(var jm=pl(em,fm),hm=0;hm<gm.length;++hm)if(im=gm[hm],em.c.a.hasOwnProperty(im)&&!jm[im])return em=Error("Unable to select an initial "+im+" stream: all "+im+" streams have been restricted (by the application or by the key system)."),em.type="stream",Promise.reject(em);fm=ec(jm).map(function(km){return km.J.create();});return Promise.all(fm).then(dd(em,function(km){if(!km.every(function(lm){return lm.length();}))return km=Error("Some streams are not available."),km.type="stream",Promise.reject(km);km=am(this,km);if(!km)return km=Error("Some streams are not available."),km.type="stream",Promise.reject(km);if(!ql(this,jm))return km=Error("Failed to create Stream objects."),km.type="stream",Promise.reject(km);this.l.start();sl(this,jm,km);return Promise.resolve();})).catch(dd(em,function(km){if("aborted"!=km.type)return Object.keys(this.b),this.a.b?(eb()<this.a.h?(km=Math.max(this.a.h-Date.now()/1000,this.oa),this.I=i.setTimeout(this.gb.bind(this,true),1000*km)):fl(this,0),Promise.resolve()):Promise.reject(km);}));}function pl(em,fm){for(var gm={},hm=0;hm<fm.length;++hm){var im=fm[hm],jm=null;if("video"==im.contentType){var km=em.l.getInitialVideoTrackId();if(null==km)continue;jm=im.o.filter(function(lm){return lm.C==km;});if(0==jm.length)continue;jm=jm[0];}else if("audio"==im.contentType){if(km=em.l.getInitialAudioTrackId(),jm=im.o.filter(function(lm){return lm.C==km;}),0==jm.length){jm=im.o.filter(function(lm){return lm.O&&lm.H;});if(0==jm.length)continue;jm=im.o[Math.floor(jm.length/2)];}else jm=jm[0];}else 0<im.o.length&&(jm=im.o[0]);gm[im.contentType]=jm;}return gm;}function ql(em,fm){var gm={},hm;for(hm in fm){var im=fm[hm],im="text"==hm?new gj(em,em.f):rl(em,im);if(!im)return ec(gm).forEach(function(jm){jm.destroy();}),false;gm[hm]=im;}em.b=gm;return true;}function rl(em,fm){var gm=new wi(em,em.f,em.h,pi(fm),em.da,em.bb);gm.D(em.g);return gm;}function sl(em,fm,gm){em.Wa=em.f.playbackRate;em.f.playbackRate=0;ul(em,gm);var hm;em.N&&em.N<=gm.end&&em.N>=gm.start?hm=em.N:em.a.b?(hm=gm.end,em.Sa=true):hm=gm.start;pc(em.j,em.f,"seeking",em.Cb.bind(em));em.f.currentTime!=hm&&(em.f.currentTime=hm,em.A=hm);vl(em,gm.start,gm.end);var im=[],jm;for(jm in em.b){gm=em.b[jm];dd(em,function(lm){im.push(lm.lb(this.U).then(dd(this,function(mm){var nm=lm.Aa();nm>this.xa&&(this.xa=nm);return mm;})));})(gm);pc(em.j,gm,"ended",em.Db.bind(em));hm=fm[jm];wj(em.G,hm);var km=em.l.getInitialSwitchReason()||void 0;gm.qa(hm,false,void 0,km);}Promise.all(im).then(em.rb.bind(em)).catch(dd(em,function(lm){"destroy"!=lm.type&&(lm=yb(lm),this.dispatchEvent(lm));}));il(em,em.ea);}j.rb=function(em){n(em&&em.length==Object.keys(this.b).length);for(var fm=Number.POSITIVE_INFINITY,gm=Number.NEGATIVE_INFINITY,hm=0;hm<em.length;++hm)var im=em[hm],fm=Math.min(fm,im),gm=Math.max(gm,im);em=yl(this);for(hm=0;hm<em.length;++hm)em[hm].ia(gm);tl(this,em,gm);hm=lc(this.c).map(function(jm){return jm.o;}).reduce(function(jm,km){return jm.concat(km);},[]).map(function(jm){var km=[jm.J.create()];jm.K&&km.push(jm.K.create());return Promise.all(km);});Promise.all(hm).then(dd(this,function(jm){for(var km=0;km<jm.length;++km)jm[km][0].ia(gm);this.Oa=true;for(var lm in this.m)jm=this.m[lm],km=this.b[lm],wj(this.G,jm.Ka),km.qa(jm.Ka,jm.Ta,jm.Ua,jm.switchReason);this.m={};})).catch(dd(this,function(jm){"aborted"!=jm.type&&(jm=yb(jm),this.dispatchEvent(jm));}));};function tl(em,fm,gm){if(fm=am(em,fm))ul(em,fm),vl(em,fm.start,fm.end);0!=gm&&(gm=em.f.currentTime+gm,em.f.currentTime=gm,em.A=gm);em.Sa&&fm&&(em.f.currentTime=fm.end);em.f.playbackRate=em.Wa;em.a.b&&null!=em.a.f&&fl(em,0);bm(em);em.U.resolve();}function ul(em,fm){if(em.a.b){isNaN(em.h.duration)&&(em.h.duration=fm.end+2592000);}else if(isNaN(em.h.duration)||fm.end>em.h.duration){em.h.duration=fm.end;for(var gm=0;gm<em.h.sourceBuffers.length;++gm)em.h.sourceBuffers[gm].appendWindowEnd=fm.end;}}j.Eb=function(){this.L=null;bm(this);var em=am(this,yl(this));em&&(this.a.b&&this.la!=em.w&&(this.la=em.w,null!=this.s&&(i.clearTimeout(this.s),this.s=null)),vl(this,em.start,em.end),this.f.paused||wl(this,this.f.currentTime,em.start,em.end));};function vl(em,fm,gm){fm=xb({type:"seekrangechanged",bubbles:true,start:fm,end:gm});em.dispatchEvent(fm);}j.Cb=function(){var em=this.f.currentTime;if(null!=this.A){if(em>=this.A-.01&&em<=this.A+.01){this.A=null;return;}this.A=null;}var fm=am(this,yl(this));if(fm){var gm=fm.end;(fm=wl(this,em,fm.start,gm))||(em<=gm+.01?fm=false:(this.f.currentTime=gm,fm=true));if(!fm)for(var hm in this.b)this.b[hm].ib();}};function wl(em,fm,gm,hm){if(fm>=gm-.01)return false;fm=0;if(em.a.b){fm=.5;for(var im in em.b)if(!em.b[im].jb(gm+fm)){fm=em.a.c;break;}}em.f.currentTime=Math.min(gm+fm,hm);return true;}j.Db=function(){if(!this.a.b){for(var em in this.b)if(!this.b[em].Ea())return;this.sa();}};function xl(em){return em.a.i&&em.f.currentTime+.5>em.la?true:false;}j.tb=function(){this.ca=true;if(xl(this))return this.sa();ec(this.b).every(function(em){return em.Ea();})&&(this.s=i.setTimeout(this.sa.bind(this),1000*this.Va));};j.sb=function(){this.ca=false;null!=this.s&&(i.clearTimeout(this.s),this.s=null);};j.Ob=function(){var em=this.G,fm=this.da.getBandwidth();em.estimatedBandwidth=fm;em.bandwidthHistory.push(new yj(fm));};j.sa=function(){this.ca=false;this.s=null;this.h.endOfStream();};function yl(em){return ec(em.b).map(function(fm){return fm.Ca();}).filter(function(fm){return null!=fm;});}function zl(em){return Math.max(em.a?em.a.c:1,em.Qa?em.g.streamBufferSize||0:0);}function am(em,fm){for(var gm=0,hm=Number.POSITIVE_INFINITY,im=Number.POSITIVE_INFINITY,jm=0;jm<fm.length;++jm){var km=fm[jm].Ba(),gm=Math.max(gm,km.start);null!=km.end&&(hm=Math.min(hm,km.end));fm[jm].length()&&(im=Math.min(im,fm[jm].w().a));}if(hm==Number.POSITIVE_INFINITY)if(hm=em.a.a[0],hm.b){hm=(hm.start||0)+hm.b;}else return null;em.a.b&&(jm=zl(em),hm=Math.max(hm-jm,gm));if(gm>hm)return null;hm=Math.floor(100000*hm)/100000;return {start:gm,end:hm,w:im};}function bm(em){em.a.b&&(em.L=i.setTimeout(em.Eb.bind(em),1000));}function cm(em){for(var fm in em.b)em.b[fm].D(em.g);}j.Aa=function(){return this.xa;};bl.prototype.getLongestInitResponseTime=bl.prototype.Aa;function dm(em,fm,gm,hm){gm||(gm=new uc());hm||(hm=new zk());bl.call(this,null,gm,hm);"string"===typeof em?this.mb=em:this.Ya=em;this.T=null;this.aa=fm;this.ka=[];this.Pa=[];this.Na=[];this.F=null;}m(dm,bl);l("shaka.player.DashVideoSource",dm);dm.prototype.pb=function(em,fm,gm){this.ka.push(em);this.Pa.push(fm||"");this.Na.push(gm||"");};dm.prototype.addExternalCaptions=dm.prototype.pb;dm.prototype.qb=function(em){this.F=em;};dm.prototype.setNetworkCallback=dm.prototype.qb;dm.prototype.destroy=function(){this.T=this.F=this.aa=null;bl.prototype.destroy.call(this);};dm.prototype.Ja=function(){var em=dd(this,function(hm){this.T=hm;for(var im=0;im<this.ka.length;im++){var jm=hm,km=this.ka[im],lm=this.Pa[im],mm=this.Na[im];if(0!==jm.a.length){var nm=new rf();nm.contentType="text";nm.lang=lm||"en";nm.c=true;lm=new uf();lm.bandwidth=0;lm.f=mm||"text/vtt";lm.u=[new ze(km)];nm.a.push(lm);jm.a[0].b.push(nm);ig(jm.a[0]);}}this.a=kj(new jj(this.aa),hm,this.F);return bl.prototype.Ja.call(this);});if(this.Ya)return em(this.Ya);var fm=[new ze(this.mb)],gm;this.na&&(gm=Math.floor(zl(this))+1,gm=Math.min(gm,this.ma),gm=new nh(gm),gm.a=Math.floor(zl(this)));fm=new ih(this.F,fm);return ph(new oh(fm,this.wa,gm)).then(em);};dm.prototype.fb=function(em,fm,gm){var hm;fm&&void 0!=gm&&(hm=new nh(fm),hm.b=gm);return ph(new oh(em,this.wa,hm)).then(dd(this,function(im){this.T=im;im=kj(new jj(this.aa),im,this.F);return Promise.resolve(im);}));};dm.prototype.eb=function(){var em=kj(new jj(this.aa),this.T,this.F);return Promise.resolve(em);};}.bind(h,b))();f.exports=h.shaka;},null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','Shaka','VideoPlayerStreamSwitchReasons','VideoQualityClasses','VideoPlayerShakaExperiments'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('Shaka').player.VideoTrack;function i(j){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new (c('SubscriptionsHandler'))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=true;this.$CustomAbrManager6=false;this.$CustomAbrManager7=j.maxWidth;this.$CustomAbrManager8=j.maxHeight;this.$CustomAbrManager9=j.minPlayQuality;this.$CustomAbrManager10=j.maxPlayQuality;this.$CustomAbrManager11=j.initiallyForcedRepresentations;this.$CustomAbrManager12=null;this.$CustomAbrManager13=null;this.$CustomAbrManager14=null;}i.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager5=false;};i.prototype.setResolutionConstraint=function(j,k){'use strict';this.$CustomAbrManager7=j;this.$CustomAbrManager8=k;this.$CustomAbrManager15();};i.prototype.initialize=function(j,k){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k;};i.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager6)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;this.$CustomAbrManager3.addSubscriptions(c('EventListener').listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager16.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager17.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager18.bind(this)));this.$CustomAbrManager6=true;};i.prototype.$CustomAbrManager18=function(){'use strict';this.$CustomAbrManager15();};i.prototype.setPreferredVideoTrack=function(j){'use strict';var k=i.$CustomAbrManager19(this.$CustomAbrManager2.getVideoTracks()),l=k?h.compare(k,j)<0:false;this.$CustomAbrManager12=j;this.$CustomAbrManager15(null,l);};i.prototype.unsetPreferredVideoTrack=function(){'use strict';this.$CustomAbrManager12=null;this.$CustomAbrManager15(null,false);};i.prototype.enable=function(j){'use strict';this.$CustomAbrManager5=j;};i.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager20();return j?j.id:null;};i.prototype.getInitialSwitchReason=function(){'use strict';return this.$CustomAbrManager14;};i.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager21();return j?j.id:null;};i.prototype.selectVideoTrack=function(j,k,l,m){'use strict';if(!this.$CustomAbrManager6)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l,m);};i.$CustomAbrManager19=function(j){'use strict';for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null;};i.prototype.$CustomAbrManager16=function(event){'use strict';if(Date.now()<this.$CustomAbrManager4)return;this.$CustomAbrManager15(event);};i.prototype.$CustomAbrManager15=function(event,j){'use strict';if(!this.$CustomAbrManager5)return;var k=this.$CustomAbrManager20();if(k){if(k.active){this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(k,!!j,0,this.$CustomAbrManager13);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};i.prototype.$CustomAbrManager17=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL;};i.prototype.$CustomAbrManager20=function(){var j,k=this;'use strict';var l=this.$CustomAbrManager2.getVideoTracks();if(l.length==0)return null;if(!this.$CustomAbrManager6)for(var m=0;m<l.length;m++)if(this.$CustomAbrManager11&&this.$CustomAbrManager11.includes(l[m].streamInfoID)){this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').FORCED;this.$CustomAbrManager14=c('VideoPlayerStreamSwitchReasons').FORCED;return l[m];}if(this.$CustomAbrManager12){var n=l.find(function(y){return y.id===this.$CustomAbrManager12.id;}.bind(this));if(n){this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').USER;return n;}}l.sort(h.compare);if(this.$CustomAbrManager9!==null||this.$CustomAbrManager10!==null){var j=function(){var y=k.$CustomAbrManager9!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager9):0,z=k.$CustomAbrManager10!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager10):c('VideoQualityClasses').length-1;if(y<=z){var aa=l.filter(function(ca){return c('VideoQualityClasses').indexOf(ca.fbQualityClass)>=y&&c('VideoQualityClasses').indexOf(ca.fbQualityClass)<=z;});k.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').PREFER_QUALITY_CLASS;if(!aa.length)return {v:l[l.length-1]};var ba=c('VideoQualityClasses').indexOf('sd');if(l.length==2&&aa.length==2&&z<=ba)return {v:l[0]};l=aa;}}();if(typeof j==="object")return j.v;}var o=l[0],p=this.$CustomAbrManager8,q=this.$CustomAbrManager7;l=l.filter(function(y){return y.width<=q||y.height<=p;});var r=i.$CustomAbrManager19(this.$CustomAbrManager2.getAudioTracks()),s=r?r.bandwidth:0,t=this.$CustomAbrManager1.getBandwidth();for(var m=0;m<l.length;m++){var u=l[m],v=m+1<l.length?l[m+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!u.bandwidth)continue;var w=(u.bandwidth+s)/i.BANDWIDTH_DOWNGRADE_TARGET,x=(v.bandwidth+s)/i.BANDWIDTH_UPGRADE_TARGET;if(t>=w&&t<=x){o=u;if(o.active)break;}}this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').BANDWIDTH;return o;};i.prototype.$CustomAbrManager21=function(){'use strict';var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager6)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager11&&this.$CustomAbrManager11.includes(j[k].streamInfoID))return j[k];return null;};i.FIRST_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchInterval;i.MIN_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').minSwitchInterval;i.MIN_EVAL_INTERVAL=c('VideoPlayerShakaExperiments').minEvalInterval;i.BANDWIDTH_UPGRADE_TARGET=c('VideoPlayerShakaExperiments').bandwidthUpgradeTarget||.85;i.BANDWIDTH_DOWNGRADE_TARGET=c('VideoPlayerShakaExperiments').bandwidthDowngradeTarget||.95;f.exports=i;},null);
__d('VideoPlayerLiveStreamState',['RTISubscriptionManager','EventEmitter'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoPlayerLiveStreamState1=c('RTISubscriptionManager').subscribe('video_broadcast/interrupt_'+k,this.$VideoPlayerLiveStreamState3.bind(this));this.$VideoPlayerLiveStreamState2=c('RTISubscriptionManager').subscribe('video_broadcast/ended_'+k,this.$VideoPlayerLiveStreamState4.bind(this));}j.prototype.unsubscribe=function(){'use strict';this.$VideoPlayerLiveStreamState2.unsubscribe();this.$VideoPlayerLiveStreamState1.unsubscribe();};j.prototype.$VideoPlayerLiveStreamState3=function(k){'use strict';var l=JSON.parse(k.payload||'{}')||{},m=l.time_position;if(m)m/=1000;this.emit('streamInterruptAt',m);};j.prototype.$VideoPlayerLiveStreamState4=function(k){'use strict';var l=JSON.parse(k.payload||'{}')||{},m=l.time_position;if(m)m/=1000;this.emit('streamEndedAt',m);};f.exports=j;},null);
__d('VideoPlayerHTML5Shaka',['invariant','Promise','BlobFactory','CacheStorage','CustomAbrManager','EventEmitter','EventListener','Event','Run','TaggedTimeRanges','VideoDashPrefetchCache','VideoPlayerLiveStreamState','VideoPlayerShakaExperiments','VideoQualityClasses','dispatchEvent','Shaka'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('Shaka').player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c('Shaka').dash.mpd.parseMpd,p=c('Shaka').util,q=p.EWMACacheBandwidthEstimator,r=p.EWMASignedURLBandwidthEstimator,s=p.FailoverUri,t=window.devicePixelRatio||1,u=new (c('CacheStorage'))('localstorage','_video_'),v=c('VideoPlayerShakaExperiments').enableAdaptation?new q(c('VideoPlayerShakaExperiments').cacheDelay,c('VideoPlayerShakaExperiments').cacheBandwidth,c('VideoPlayerShakaExperiments').useStoredBandwidthEstimate?u.get('bandwidthEstimate'):undefined):new r();s.setPrefetchCacheValueGetter(c('VideoDashPrefetchCache').getCacheValue);c('Run').onUnload(function(){return u.set('bandwidthEstimate',v.getBandwidth());});c('Shaka').polyfill.Fullscreen.install();function w(ca){var da=ca.getVideoTracks();da.sort(n.compare);var ea=da.reduce(function(fa,ga){return ga.fbQualityLabel=='hd'?ga:fa;});if(!ea)return da.pop().id;return ea.id;}function x(ca){var da=ca.getVideoTracks();da.sort(n.compare);return da.shift().id;}function y(ca){var da=c('BlobFactory').getBlob([ca]);return URL.createObjectURL(da);}function z(ca,event){var da=c('EventListener').capture(ca.parentNode,event,function(ea){if(ea.target!=ca)return;da.remove();c('Event').kill(ea);});}function aa(ca,da){'use strict';this.$DisabledAbrManager1=ca;this.$DisabledAbrManager2=da;}aa.prototype.initialize=function(ca,da){'use strict';this.$DisabledAbrManager3=da;};aa.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(w(this.$DisabledAbrManager3),false);};aa.prototype.enable=function(){'use strict';};aa.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return x(this.$DisabledAbrManager3);var ca=this.$DisabledAbrManager1?w(this.$DisabledAbrManager3):x(this.$DisabledAbrManager3);return ca;};aa.prototype.setPreferredVideoTrack=function(ca){'use strict';if(this.$DisabledAbrManager4)this.$DisabledAbrManager3.selectVideoTrack(ca.id,true);};aa.prototype.unsetPreferredVideoTrack=function(){'use strict';};aa.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};i=babelHelpers.inherits(ba,c('EventEmitter'));j=i&&i.prototype;function ba(ca,da,ea){var fa,ga=this,ha=ea.videoID,ia=ea.width,ja=ea.height,ka=ea.manifest,la=ea.manifestUrl,ma=ea.isLive,na=ea.minPlayQuality,oa=ea.maxPlayQuality;'use strict';j.constructor.call(this);this.$VideoPlayerHTML5Shaka1=na;this.$VideoPlayerHTML5Shaka2=oa;this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka4=false;this.$VideoPlayerHTML5Shaka5=null;this.$VideoPlayerHTML5Shaka6=1;this.$VideoPlayerHTML5Shaka7=false;this.$VideoPlayerHTML5Shaka8=ia;this.$VideoPlayerHTML5Shaka9=ja;if(!c('VideoPlayerShakaExperiments').improveRebufferLogging)(function(){ga.$VideoPlayerHTML5Shaka10=true;var qa=c('EventListener').listen(ca,'playing',function(){this.$VideoPlayerHTML5Shaka10=false;qa.remove();}.bind(ga));})();c('EventListener').listen(ca,'timeupdate',function(qa){this.$VideoPlayerHTML5Shaka11(qa.target.currentTime);}.bind(this));this.$VideoPlayerHTML5Shaka12=null;this.$VideoPlayerHTML5Shaka13=null;this.$VideoPlayerHTML5Shaka14=null;this.$VideoPlayerHTML5Shaka15=new l(ca);this.$VideoPlayerHTML5Shaka15.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka16();}.bind(this));this.$VideoPlayerHTML5Shaka15.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka17();}.bind(this));this.$VideoPlayerHTML5Shaka15.addEventListener('error',function(qa){return this.$VideoPlayerHTML5Shaka18(qa);}.bind(this));this.$VideoPlayerHTML5Shaka15.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka19.bind(this));this.$VideoPlayerHTML5Shaka15.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka20.bind(this));this.$VideoPlayerHTML5Shaka15.addEventListener('manifestwrapped',this.$VideoPlayerHTML5Shaka21.bind(this));if(c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection)this.$VideoPlayerHTML5Shaka15.addEventListener('manifestIsUpdating',this.$VideoPlayerHTML5Shaka22.bind(this));this.$VideoPlayerHTML5Shaka23=da;this.$VideoPlayerHTML5Shaka24=null;var pa=false;if(ka){this.$VideoPlayerHTML5Shaka25=o(ka);}else{this.$VideoPlayerHTML5Shaka25=la;pa=la.indexOf('/dash-abr/')!==-1;}this.$VideoPlayerHTML5Shaka26=this.$VideoPlayerHTML5Shaka27();this.$VideoPlayerHTML5Shaka28=this.$VideoPlayerHTML5Shaka29();this.$VideoPlayerHTML5Shaka30=new (c('TaggedTimeRanges'))(function(qa,ra){return (qa.id===ra.id&&qa.reason===ra.reason);});this.$VideoPlayerHTML5Shaka28.setTaggedTimeRangesEntryAdder(function(qa,ra,sa){this.$VideoPlayerHTML5Shaka30.add(qa,ra,sa);}.bind(this));this.$VideoPlayerHTML5Shaka31=ca;this.$VideoPlayerHTML5Shaka15.configure({enableAdaptation:c('VideoPlayerShakaExperiments').enableAdaptation,appendPlayingQueryParam:c('VideoPlayerShakaExperiments').addCdnDebugQueryParameters,endBufferingOnPlaying:c('VideoPlayerShakaExperiments').endBufferingOnPlaying,usePlaybackRateForBuffering:c('VideoPlayerShakaExperiments').improveRebufferLogging,streamBufferSize:ma?c('VideoPlayerShakaExperiments').liveStreamBufferSize:c('VideoPlayerShakaExperiments').streamBufferSize,initialStreamBufferSize:ma?c('VideoPlayerShakaExperiments').liveInitialStreamBufferSize:c('VideoPlayerShakaExperiments').initialStreamBufferSize,includeStreamBufferSizeInStartOffset:c('VideoPlayerShakaExperiments').includeStreamBufferSizeInStartOffset,minMpdRefreshInterval:c('VideoPlayerShakaExperiments').minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c('VideoPlayerShakaExperiments').liveStreamEndTimeout/1000,enableLiveInterruptionDetection:c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection,liveInterruptionConsecutiveUpdatesWithoutChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithChange,liveMaxSegmentsToPush:c('VideoPlayerShakaExperiments').liveMaxSegmentsToPush,liveSendPushHeaders:c('VideoPlayerShakaExperiments').liveSendPushHeaders&&!pa,resolveVideoTimeUpdateOnFragmentedTimeRanges:c('VideoPlayerShakaExperiments').resolveVideoTimeUpdateOnFragmentedTimeRanges});if(ma&&c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection){this.$VideoPlayerHTML5Shaka32=new (c('VideoPlayerLiveStreamState'))(ha);this.$VideoPlayerHTML5Shaka32.addListener('streamInterruptAt',this.$VideoPlayerHTML5Shaka33.bind(this));}this.$VideoPlayerHTML5Shaka15.load(this.$VideoPlayerHTML5Shaka28);}ba.prototype.getEstimatedBandwidth=function(){'use strict';return v.getBandwidth();};ba.prototype.$VideoPlayerHTML5Shaka11=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka30.get(ca);if(!da)return;var ea=da.id,fa=da.reason;if(this.$VideoPlayerHTML5Shaka24!==ea){var ga=this.$VideoPlayerHTML5Shaka24;this.$VideoPlayerHTML5Shaka24=ea;this.emit('representation_ended',{representationID:ga,nextRepresentationID:ea,streamSwitchReason:fa});}};ba.prototype.getStreamInfoIDForTimePosition=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka30.get(ca),ea=null;if(da)ea=da.id;return ea;};ba.prototype.$VideoPlayerHTML5Shaka34=function(ca,da){'use strict';if(ca.fbQualityLabel){return ca.fbQualityLabel;}else if(n.compare(ca,da[0])==0){return 'SD';}else if(n.compare(ca,da[da.length-1])==0){return 'HD';}else return null;};ba.prototype.getAvailableVideoQualities=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka12;var ca=this.$VideoPlayerHTML5Shaka28.getVideoTracks();ca.sort(n.compare);return ca.every(function(da){return da.fbQualityLabel!==null;})?ca.map(function(da){return da.fbQualityLabel;}):ca.length>1?['SD','HD']:['SD'];};ba.prototype.getSelectedVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka13;var ca=this.$VideoPlayerHTML5Shaka28.getVideoTracks();ca.sort(n.compare);var da=ca.find(function(ea){return ea.active;});return da?this.$VideoPlayerHTML5Shaka34(da,ca):null;};ba.prototype.canAutoSelectVideoQuality=function(){'use strict';return c('VideoPlayerShakaExperiments').enableAdaptation;};ba.prototype.setPreferredVideoQuality=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka28.getVideoTracks();da.sort(n.compare);var ea=da.find(function(fa){return ca==this.$VideoPlayerHTML5Shaka34(fa,da);}.bind(this));if(ea){this.$VideoPlayerHTML5Shaka14=ca;this.$VideoPlayerHTML5Shaka26.setPreferredVideoTrack(ea);}};ba.prototype.unsetPreferredVideoQuality=function(){'use strict';this.$VideoPlayerHTML5Shaka14=null;this.$VideoPlayerHTML5Shaka26.unsetPreferredVideoTrack();};ba.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka35&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka36=true;this.$VideoPlayerHTML5Shaka37=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka31,'pause');this.$VideoPlayerHTML5Shaka15.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka31.pause();};ba.prototype.play=function(){'use strict';if(this.$VideoPlayerHTML5Shaka35&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka36=false;this.$VideoPlayerHTML5Shaka37=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka31,'play');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka31,'waiting');this.$VideoPlayerHTML5Shaka15.setResumeAfterBuffering(true);return c('Promise').resolve();}else return this.$VideoPlayerHTML5Shaka31.play();};ba.prototype.$VideoPlayerHTML5Shaka38=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka5;if(ca){var da=this.$VideoPlayerHTML5Shaka31.currentTime,ea=4,fa=da>ca-ea,ga=da>ca;if(ga){this.$VideoPlayerHTML5Shaka5=null;}else if(this.$VideoPlayerHTML5Shaka35)this.$VideoPlayerHTML5Shaka7=fa;}return this.$VideoPlayerHTML5Shaka7;};ba.prototype.$VideoPlayerHTML5Shaka16=function(){'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){z(this.$VideoPlayerHTML5Shaka31,'pause');this.$VideoPlayerHTML5Shaka36=false;this.$VideoPlayerHTML5Shaka37=false;}this.$VideoPlayerHTML5Shaka35=true;if(this.$VideoPlayerHTML5Shaka38()){this.emit('streamInterrupted');}else{this.$VideoPlayerHTML5Shaka15.setResumeAfterBuffering(true);this.emit('bufferingStart');}};ba.prototype.$VideoPlayerHTML5Shaka17=function(){var ca,da=this;'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){if(!this.$VideoPlayerHTML5Shaka36)z(this.$VideoPlayerHTML5Shaka31,'play');if(!this.$VideoPlayerHTML5Shaka37)(function(){var ea=c('EventListener').capture(da.$VideoPlayerHTML5Shaka31.parentNode,'playing',function(fa){if(fa.target!=this.$VideoPlayerHTML5Shaka31)return;ea.remove();if(this.$VideoPlayerHTML5Shaka10){this.$VideoPlayerHTML5Shaka10=false;return;}c('Event').kill(fa);}.bind(da));})();}this.$VideoPlayerHTML5Shaka35=false;this.$VideoPlayerHTML5Shaka28.setIsLiveInterrupted(false);if(this.$VideoPlayerHTML5Shaka7){this.$VideoPlayerHTML5Shaka39();}else this.emit('bufferingEnd');};ba.prototype.$VideoPlayerHTML5Shaka18=function(ca){'use strict';var da=ca.detail||{},ea=da.type||'undefined';if(this.$VideoPlayerHTML5Shaka4&&this.$VideoPlayerHTML5Shaka3&&ea=='net')return;this.emit('error',{error:'SHAKA_'+ea.toUpperCase(),message:da.message,httpStatus:da.status||null,url:da.url||null});};ba.prototype.hasSelectableVideoTracks=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka15.getVideoTracks();return ca.length>1;};ba.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka13=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka12=this.getAvailableVideoQualities();this.$VideoPlayerHTML5Shaka4=this.$VideoPlayerHTML5Shaka28&&this.$VideoPlayerHTML5Shaka28.isLive();this.$VideoPlayerHTML5Shaka15.unload();this.$VideoPlayerHTML5Shaka3=true;};ba.prototype.$VideoPlayerHTML5Shaka27=function(){'use strict';var ca={minPlayQuality:this.$VideoPlayerHTML5Shaka1,maxPlayQuality:this.$VideoPlayerHTML5Shaka2,maxWidth:this.$VideoPlayerHTML5Shaka40(),maxHeight:this.$VideoPlayerHTML5Shaka41(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka23},da=c('VideoQualityClasses').indexOf('hd'),ea=this.$VideoPlayerHTML5Shaka1!=null&&c('VideoQualityClasses').indexOf(this.$VideoPlayerHTML5Shaka1)>=da;return c('VideoPlayerShakaExperiments').enableAdaptation?new (c('CustomAbrManager'))(ca):new aa(ea,c('VideoPlayerShakaExperiments').switchFromLowQuality);};ba.prototype.$VideoPlayerHTML5Shaka29=function(){'use strict';!this.$VideoPlayerHTML5Shaka26?h(0):void 0;!this.$VideoPlayerHTML5Shaka25?h(0):void 0;var ca=new m(this.$VideoPlayerHTML5Shaka25,null,v,this.$VideoPlayerHTML5Shaka26);return ca;};ba.prototype.reload=function(ca){'use strict';if(!this.$VideoPlayerHTML5Shaka3)return;this.$VideoPlayerHTML5Shaka26=this.$VideoPlayerHTML5Shaka27();this.$VideoPlayerHTML5Shaka28=this.$VideoPlayerHTML5Shaka29();if(this.$VideoPlayerHTML5Shaka38()){this.$VideoPlayerHTML5Shaka31.playbackRate=0;this.emit('streamInterrupted');}this.$VideoPlayerHTML5Shaka15.setPlaybackStartTime(ca);return this.$VideoPlayerHTML5Shaka15.loadWithSilencedErrors(this.$VideoPlayerHTML5Shaka28).then(function(){if(this.$VideoPlayerHTML5Shaka4!=this.$VideoPlayerHTML5Shaka28.isLive())return this.$VideoPlayerHTML5Shaka42();if(this.$VideoPlayerHTML5Shaka14)this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka14);this.$VideoPlayerHTML5Shaka13=null;this.$VideoPlayerHTML5Shaka43=null;this.$VideoPlayerHTML5Shaka3=false;}.bind(this))['catch'](function(da){if(this.$VideoPlayerHTML5Shaka4)return this.$VideoPlayerHTML5Shaka42();da.detail=da.detail||{};da.detail.type=da.detail.type||'LOAD_FAILURE';this.$VideoPlayerHTML5Shaka18(da);}.bind(this));};ba.prototype.$VideoPlayerHTML5Shaka42=function(){'use strict';c('dispatchEvent')(this.$VideoPlayerHTML5Shaka31,'seeked');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka31,'playing');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka31,'ended');this.emit('streamResumed');this.$VideoPlayerHTML5Shaka32.unsubscribe();this.unload();};ba.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka28.getLongestInitResponseTime();};ba.$VideoPlayerHTML5Shaka44=function(){'use strict';return (c('VideoPlayerShakaExperiments').resolutionConstraintFactor*t);};ba.prototype.$VideoPlayerHTML5Shaka40=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka8*ba.$VideoPlayerHTML5Shaka44();};ba.prototype.$VideoPlayerHTML5Shaka41=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka9*ba.$VideoPlayerHTML5Shaka44();};ba.prototype.setDimensions=function(ca,da){'use strict';this.$VideoPlayerHTML5Shaka8=ca;this.$VideoPlayerHTML5Shaka9=da;this.$VideoPlayerHTML5Shaka26.setResolutionConstraint(this.$VideoPlayerHTML5Shaka40(),this.$VideoPlayerHTML5Shaka41());};ba.isSupported=function(){'use strict';return l.isBrowserSupported();};ba.prototype.$VideoPlayerHTML5Shaka20=function(){'use strict';this.emit('tracksChanged');};ba.prototype.$VideoPlayerHTML5Shaka19=function(event){'use strict';if(event.contentType==='video')this.emit('adaptation',{reason:event.reason});};ba.prototype.$VideoPlayerHTML5Shaka33=function(ca){'use strict';this.$VideoPlayerHTML5Shaka28.setIsLiveInterrupted(true);this.$VideoPlayerHTML5Shaka5=ca;};ba.prototype.$VideoPlayerHTML5Shaka22=function(){'use strict';if(this.$VideoPlayerHTML5Shaka38())this.$VideoPlayerHTML5Shaka39();};ba.prototype.$VideoPlayerHTML5Shaka39=function(){'use strict';this.$VideoPlayerHTML5Shaka5=null;this.$VideoPlayerHTML5Shaka7=false;this.emit('streamResumed');};ba.prototype.$VideoPlayerHTML5Shaka21=function(){'use strict';var ca=!this.$VideoPlayerHTML5Shaka31.paused;this.unload();this.reload().then(function(){if(this.$VideoPlayerHTML5Shaka7)this.$VideoPlayerHTML5Shaka39();if(ca)this.play();}.bind(this))['catch'](function(da){});};f.exports=ba;},null);